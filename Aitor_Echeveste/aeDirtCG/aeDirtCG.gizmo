add_layer {P P.red P.green P.blue P.alpha}
Group {
 name aeDirtCG
 knobChanged "n = nuke.thisNode()\nk = nuke.thisKnob()\n        \nif k.name() == \"inputData\":\n    s = n.knob('inputData').getValue()\n    if s == 1:\n        groupNode = nuke.thisNode()\n        with groupNode:\n            input = nuke.toNode('img')\n            input\['name'].setValue('deep')\n            n\['tile_color'].setValue(0x2866ff)\n            \n    else:\n            input = nuke.toNode('deep')\n            input\['name'].setValue('img')\n            n\['tile_color'].setValue(0xffbf00ff)\n\n  \n  \nif k.name() == \"inputData\":\n    s = n.knob('inputData').getValue()\n    if s == 0:\n        n\['img_in'].setEnabled(True)\n    else:\n        n\['img_in'].setEnabled(False)\n\n\n\nif k.name() == \"inputNoise\":\n    s = n.knob('inputNoise').getValue()\n    if s == 1: \n        groupNode = nuke.thisNode()\n        with groupNode:\n            c = nuke.toNode('connectInput2')\n            newInput2 = nuke.nodes.Input()\n            newInput2\['name'].setValue('noise')\n\n            pos_x = c.xpos()\n            pos_y = c.ypos()\n            \n            newInput2.setXpos(pos_x-34)\n            newInput2.setYpos(pos_y-100)\n            c.setInput(0, newInput2)\n    else:\n        input2 = nuke.toNode('noise')\n        nuke.delete(input2)\n        \n"
 tile_color 0xffbf00ff
 note_font "Verdana Bold"
 note_font_color 0xffffffff
 selected true
 xpos 4
 ypos 481
 addUserKnob {20 aeDirt}
 addUserKnob {26 inputTitle l "<b><font color=#ffffff>Input data</font><b>"}
 addUserKnob {4 inputData l input t "Use img input for normal 2D workflow and deep input for a full deep workflow.\nFor deep workflow, you must to conect your camera. " M {img deep "" "" "" "" "" "" "" "" ""}}
 addUserKnob {26 space l "" -STARTLINE T "     "}
 addUserKnob {41 output t "Use 'Result' to directly apply color corrections to your CG work, 'Noise' outputs to visualize your noise patterns and to apply any change, and 'Precomp' to render the noise pattern and accelerate the process." -STARTLINE T menu.output}
 addUserKnob {26 space_1 l "" -STARTLINE T "     "}
 addUserKnob {6 premultiplied l un/premult -STARTLINE}
 addUserKnob {26 space_1_1 l "" -STARTLINE T "     "}
 addUserKnob {6 z l 1/Depth t "Normalize your depth when you are using deep workflow" -STARTLINE}
 addUserKnob {26 ""}
 addUserKnob {41 img_in l data t "Channel of your position data in 2D workflow." T ShuffleInImg.in}
 addUserKnob {26 ""}
 addUserKnob {26 luminanceTitle l "<b><font color=#ffffff>Luminance</font><b>"}
 addUserKnob {6 color_rgb_panelDropped l "panel dropped state" +HIDDEN +STARTLINE}
 addUserKnob {41 sizeR l size T menu.sizeR}
 addUserKnob {18 lumMultiply l multiply}
 lumMultiply 1
 addUserKnob {6 lumMultiply_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 multiply_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {6 colorTweak_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
 addUserKnob {7 luminanceMix l mix}
 luminanceMix 1
 addUserKnob {26 contrastTitle l "<b><font color=#ffffff>Contrast</font><b>"}
 addUserKnob {41 sizeG l size T menu.sizeG}
 addUserKnob {7 contrastMix l mix}
 contrastMix 1
 addUserKnob {26 colorTittle l "<b><font color=#ffffff>Saturation</font><b>"}
 addUserKnob {41 sizeB l size T menu.sizeB}
 addUserKnob {7 colorMix l mix}
 colorMix 1
 addUserKnob {26 colorTittle_1 l "<b><font color=#ffffff>Alpha mask</font><b>"}
 addUserKnob {41 sizeA l size T menu.sizeA}
 addUserKnob {7 alphaMaskMix l mix}
 alphaMaskMix 1
 addUserKnob {26 ""}
 addUserKnob {26 "" l mask T ""}
 addUserKnob {41 maskChannelInput l "" -STARTLINE T Merge5.maskChannelInput}
 addUserKnob {41 inject -STARTLINE T Merge5.inject}
 addUserKnob {41 invert_mask l invert -STARTLINE T Merge5.invert_mask}
 addUserKnob {41 fringe -STARTLINE T Merge5.fringe}
 addUserKnob {41 mix T Merge5.mix}
 addUserKnob {26 ""}
 addUserKnob {26 about_1 l "" +STARTLINE T "<span style=\"color:#666\"><br/><b>aeDirtCG v1.2</b> - <a  style=\"color:#666;text-decoration: none;\">Aitor Echeveste</a>  © 2023</span>"}
 addUserKnob {20 extra l Extra}
 addUserKnob {26 text_6 l "" +STARTLINE T " "}
 addUserKnob {41 output_1 l output t "Use 'Result' to directly apply color corrections to your CG work, 'Noise' outputs to visualize your noise patterns and to apply any change, and 'Precomp' to render the noise pattern and accelerate the process." -STARTLINE T menu.output}
 addUserKnob {26 text_1 l "" -STARTLINE T "     "}
 addUserKnob {4 units t "set cut_paste_input \[stack 0]\nversion 13.2 v6\npush \$cut_paste_input\nadd_layer \{pref pref.u pref.v pref.w\}\nGroup \{\n name aeDirtCG\n knobChanged \"n = nuke.thisNode()\\nk = nuke.thisKnob()\\n        \\nif k.name() == \\\"inputData\\\":\\n    s = n.knob('inputData').getValue()\\n    if s == 1:\\n        groupNode = nuke.thisNode()\\n        with groupNode:\\n            input = nuke.toNode('img')\\n            input\\\['name'].setValue('deep')\\n            \\n    else:\\n            input = nuke.toNode('deep')\\n            input\\\['name'].setValue('img')\\n  \\n  \\nif k.name() == \\\"inputData\\\":\\n    s = n.knob('inputData').getValue()\\n    if s == 0:\\n        n\\\['img_in'].setEnabled(True)\\n    else:\\n        n\\\['img_in'].setEnabled(False)\\n\\n\\n\\nif k.name() == \\\"inputNoise\\\":\\n    s = n.knob('inputNoise').getValue()\\n    if s == 1: \\n        groupNode = nuke.thisNode()\\n        with groupNode:\\n            c = nuke.toNode('connectInput2')\\n            newInput2 = nuke.nodes.Input()\\n            newInput2\\\['name'].setValue('noise')\\n\\n            pos_x = c.xpos()\\n            pos_y = c.ypos()\\n            \\n            newInput2.setXpos(pos_x-34)\\n            newInput2.setYpos(pos_y-100)\\n            c.setInput(0, newInput2)\\n    else:\\n        input2 = nuke.toNode('noise')\\n        nuke.delete(input2)\\n        \\n\"\n selected true\n xpos -11665\n ypos -8997\n addUserKnob \{20 aeDirt\}\n addUserKnob \{26 inputTitle l \"<b><font color=#ffffff>Input data</font><b>\"\}\n addUserKnob \{4 inputData l input M \{img deep \"\" \"\" \"\" \"\"\}\}\n addUserKnob \{26 space l \"\" -STARTLINE T \"     \"\}\n addUserKnob \{41 output -STARTLINE T menu.output\}\n addUserKnob \{26 space_1 l \"\" -STARTLINE T \"     \"\}\n addUserKnob \{6 premultiplied -STARTLINE\}\n premultiplied true\n addUserKnob \{26 \"\" +STARTLINE\}\n addUserKnob \{41 img_in l data T ShuffleInImg.in\}\n addUserKnob \{26 \"\"\}\n addUserKnob \{26 luminanceTitle l \"<b><font color=#ffffff>Luminance</font><b>\"\}\n addUserKnob \{6 color_rgb_panelDropped l \"panel dropped state\" +HIDDEN +STARTLINE\}\n addUserKnob \{41 sizeR l size T menu.sizeR\}\n addUserKnob \{18 lumMultiply l multiply\}\n lumMultiply 1\n addUserKnob \{6 lumMultiply_panelDropped l \"panel dropped state\" -STARTLINE +HIDDEN\}\n addUserKnob \{6 multiply_panelDropped l \"panel dropped state\" -STARTLINE +HIDDEN\}\n addUserKnob \{6 colorTweak_panelDropped l \"panel dropped state\" -STARTLINE +HIDDEN\}\n addUserKnob \{7 luminanceMix l mix\}\n luminanceMix 1\n addUserKnob \{26 contrastTitle l \"<b><font color=#ffffff>Contrast</font><b>\"\}\n addUserKnob \{41 sizeG l size T menu.sizeG\}\n addUserKnob \{7 contrastMix l mix\}\n contrastMix 1\n addUserKnob \{26 colorTittle l \"<b><font color=#ffffff>Saturation</font><b>\"\}\n addUserKnob \{41 sizeB l size T menu.sizeB\}\n addUserKnob \{7 colorMix l mix\}\n colorMix 1\n addUserKnob \{26 colorTittle_1 l \"<b><font color=#ffffff>Alpha mask</font><b>\"\}\n addUserKnob \{41 sizeA l size T menu.sizeA\}\n addUserKnob \{7 alphaMaskMix l mix\}\n alphaMaskMix 1\n addUserKnob \{26 \"\"\}\n addUserKnob \{26 \"\" l mask T \"\"\}\n addUserKnob \{41 maskChannelInput l \"\" -STARTLINE T Merge5.maskChannelInput\}\n addUserKnob \{41 inject -STARTLINE T Merge5.inject\}\n addUserKnob \{41 invert_mask l invert -STARTLINE T Merge5.invert_mask\}\n addUserKnob \{41 fringe -STARTLINE T Merge5.fringe\}\n addUserKnob \{41 mix T Merge5.mix\}\n addUserKnob \{26 \"\"\}\n addUserKnob \{26 about_1 l \"\" +STARTLINE T \"<span style=\\\"color:#666\\\"><br/><b>aeDirtCG v1.0</b> - <a  style=\\\"color:#666;text-decoration: none;\\\">Aitor Echeveste</a>  © 2023</span>\"\}\n addUserKnob \{20 extra l Extra\}\n addUserKnob \{41 output_1 l output T menu.output\}\n addUserKnob \{26 text_1 l \"\" -STARTLINE T \"     \"\}\n addUserKnob \{4 units -STARTLINE M \{mm cm m \"\" \"\"\}\}\n units cm\n addUserKnob \{26 text l \"\" -STARTLINE T \"     \"\}\n addUserKnob \{6 motionBlur l \"motion blur\" -STARTLINE\}\n addUserKnob \{26 text_\n\n5 l \"\" -STARTLINE T \"     \"\}\n addUserKnob \{6 inputNoise l \"input noise\" t \"It allows you to pre-render the noise pattern and conect it, to acelerate the process.\\nTo achieve this, first set the output in the precomposition, render all the image channels, then activate the checkbox, and finally connect the image to the noise input.\" -STARTLINE\}\n addUserKnob \{26 \"\"\}\n addUserKnob \{20 motionblur l \"motion blur\" n 1\}\n motionblur 0\n addUserKnob \{41 constant l add T VectorBlur2.constant\}\n addUserKnob \{41 scale l multiply T VectorBlur2.scale\}\n addUserKnob \{41 method T VectorBlur2.method\}\n addUserKnob \{26 \"\"\}\n addUserKnob \{41 shutter T MotionBlur3D1.shutter\}\n addUserKnob \{41 shutteroffset l \"shutter offset\" T MotionBlur3D1.shutteroffset\}\n addUserKnob \{41 shuttercustomoffset l \"\" -STARTLINE T MotionBlur3D1.shuttercustomoffset\}\n addUserKnob \{20 endGroup_3 l endGroup n -1\}\n addUserKnob \{26 \"\"\}\n addUserKnob \{20 luminanceSettings l luminance n 1\}\n luminanceSettings 0\n addUserKnob \{41 sizeR_1 l size T menu.sizeR\}\n addUserKnob \{7 lumOffset l offset\}\n addUserKnob \{3 lumOctaves l octaves\}\n lumOctaves 4\n addUserKnob \{7 lumLacunarity l lacunarity\}\n lumLacunarity 2.5\n addUserKnob \{7 lumPersistence l persistence\}\n lumPersistence 0.6\n addUserKnob \{7 lumGain l gain\}\n lumGain 1\n addUserKnob \{7 lumGamma l gamma\}\n lumGamma 0.25\n addUserKnob \{26 \"\"\}\n addUserKnob \{41 uniform_scale l \"uniform scale\" T Axis_r.uniform_scale\}\n addUserKnob \{41 translate T Axis_r.translate\}\n addUserKnob \{41 rotate T Axis_r.rotate\}\n addUserKnob \{41 scaling l scale T Axis_r.scaling\}\n addUserKnob \{26 text_2 l \"\" +STARTLINE T \"     \"\}\n addUserKnob \{20 endGroup n -1\}\n addUserKnob \{26 \"\"\}\n addUserKnob \{20 contrastSettings l contrast n 1\}\n contrastSettings 0\n addUserKnob \{41 sizeG_1 l size T menu.sizeG\}\n addUserKnob \{7 contOffset l z R 0 5\}\n addUserKnob \{3 contOctaves l octaves\}\n contOctaves 4\n addUserKnob \{7 conLacunarity l lacunarity\}\n conLacunarity 3\n addUserKnob \{7 contPersistence l persistence\}\n contPersistence 0.5\n addUserKnob \{7 contGain l gain\}\n contGain 1\n addUserKnob \{7 contGamma l gamma\}\n contGamma 0.3\n addUserKnob \{26 \"\"\}\n addUserKnob \{41 translate_1 l translate T Axis_g.translate\}\n addUserKnob \{41 rotate_1 l rotate T Axis_g.rotate\}\n addUserKnob \{41 scaling_1 l scale T Axis_g.scaling\}\n addUserKnob \{41 uniform_scale_1 l \"uniform scale\" T Axis_g.uniform_scale\}\n addUserKnob \{26 text_2_2 l \"\" +STARTLINE T \"     \"\}\n addUserKnob \{20 endGroup_1 l endGroup n -1\}\n addUserKnob \{26 \"\"\}\n addUserKnob \{20 saturationSettings l saturation n 1\}\n saturationSettings 0\n addUserKnob \{41 sizeB_1 l size T menu.sizeB\}\n addUserKnob \{7 satOffset l z R 0 5\}\n addUserKnob \{3 satOctaves l octaves\}\n satOctaves 2\n addUserKnob \{7 satLacunarity l lacunarity\}\n satLacunarity 3\n addUserKnob \{7 satPersistence l persistence\}\n satPersistence 1\n addUserKnob \{7 satGain l gain\}\n satGain 1\n addUserKnob \{7 satGamma l gamma\}\n satGamma 0.5\n addUserKnob \{26 \"\"\}\n addUserKnob \{41 translate_2 l translate T Axis_b.translate\}\n addUserKnob \{41 rotate_2 l rotate T Axis_b.rotate\}\n addUserKnob \{41 scaling_2 l scale T Axis_b.scaling\}\n addUserKnob \{41 uniform_scale_2 l \"uniform scale\" T Axis_b.uniform_scale\}\n addUserKnob \{26 text_2_2_1 l \"\" +STARTLINE T \"     \"\}\n addUserKnob \{20 endGroup_2 l endGroup n -1\}\n addUserKnob \{26 \"\" +STARTLINE\}\n addUserKnob \{20 alphaMask l \"alpha mask\" n 1\}\n alphaMask 0\n addUserKnob \{41 sizeA_1 l size T menu.sizeA\}\n addUserKnob \{3 maskOffset l z\}\n addUserKnob \{7 maskOctaves l octaves\}\n maskOctaves 2\n addUserKnob \{7 maskLacunarity l lacunarity\}\n maskLacunarity 3\n addUserKnob \{7 maskPersistence l persistence\}\n maskPersistence 0.6\n addUserKnob \{7 maskGain l gain\}\n maskGain 0.85\n addUserKnob \{7 maskGamma l gamma\}\n maskGamma 0.85\n addUserKnob \{26 \"\" +STARTLINE\}\n addUserKnob \{41 translate_3 l translate T Axis_a. ntranslate\}\n addUserKnob \{41 rotate_3 l rotate T Axis_a.rotate\}\n addUserKnob \{41 scaling_3 l scale T Axis_a.scaling\}\n addUserKnob \{41 uniform_scale_3 l \"uniform scale\" T Axis_a.uniform_scale\}\n addUserKnob \{26 text_2_2_1_1 l \"\" +STARTLINE T \"     \"\}\n addUserKnob \{20 endGroup_4 l endGroup n -1\}\n addUserKnob \{20 About\}\n addUserKnob \{26 text_1_1 l \"\" +STARTLINE T \"   \"\}\n addUserKnob \{26 text_2_1 l \"\" +STARTLINE T \"   \"\}\n addUserKnob \{26 text_4 l \"\" +STARTLINE T \"<font color=#ffffff><font size=\\\"7\\\">aeDirtCG</font><font size=\\\"4\\\"> v1.0</font>\\n\"\}\n addUserKnob \{26 about_1_1 l \"\" +STARTLINE T \"by Aitor Echeveste © 2023\"\}\n addUserKnob \{26 text_1_1_1 l \"\" +STARTLINE T \"   \"\}\n addUserKnob \{26 \"\"\}\n addUserKnob \{26 text_3 l \"\" +STARTLINE T \"   \"\}\n addUserKnob \{26 website l \"\" +STARTLINE T \"<b><a href=\\\"http://www.aitorecheveste.com\\\"><span style=\\\"color:#C8C8C8;\\\">www.aitorecheveste.com</span></a><b>\"\}\n\}\n Axis3 \{\n  inputs 0\n  scaling \{1 1.25 1.25\}\n  name Axis_r\n  xpos -519\n  ypos 1110\n  addUserKnob \{20 hydra_tab l Hydra\}\n  addUserKnob \{6 sauron_lock l lock t \"Prevents Sauron from updating this node when locked.\" -STARTLINE\}\n  addUserKnob \{1 hyref_path l hyref\}\n  addUserKnob \{1 asset_path l path\}\n  addUserKnob \{1 date l \"modified date\"\}\n  addUserKnob \{1 user l \"user name\"\}\n  addUserKnob \{6 deprecated +DISABLED +STARTLINE\}\n  addUserKnob \{26 hydra_divider l \"\" +STARTLINE\}\n  addUserKnob \{22 hydra_refresh l refresh T \"from nuke_weta_base.node.hydra_tab import on_refresh; on_refresh()\" +STARTLINE\}\n  addUserKnob \{26 hydra_metadata -STARTLINE +HIDDEN +INVISIBLE T \"\\\{\\\}\"\}\n \}\n Axis3 \{\n  inputs 0\n  scaling \{1 1.25 1\}\n  name Axis_g\n  xpos -520\n  ypos 1204\n  addUserKnob \{20 hydra_tab l Hydra\}\n  addUserKnob \{6 sauron_lock l lock t \"Prevents Sauron from updating this node when locked.\" -STARTLINE\}\n  addUserKnob \{1 hyref_path l hyref\}\n  addUserKnob \{1 asset_path l path\}\n  addUserKnob \{1 date l \"modified date\"\}\n  addUserKnob \{1 user l \"user name\"\}\n  addUserKnob \{6 deprecated +DISABLED +STARTLINE\}\n  addUserKnob \{26 hydra_divider l \"\" +STARTLINE\}\n  addUserKnob \{22 hydra_refresh l refresh T \"from nuke_weta_base.node.hydra_tab import on_refresh; on_refresh()\" +STARTLINE\}\n  addUserKnob \{26 hydra_metadata -STARTLINE +HIDDEN +INVISIBLE T \"\\\{\\\}\"\}\n \}\n Axis3 \{\n  inputs 0\n  name Axis_b\n  xpos -520\n  ypos 1306\n  addUserKnob \{20 hydra_tab l Hydra\}\n  addUserKnob \{6 sauron_lock l lock t \"Prevents Sauron from updating this node when locked.\" -STARTLINE\}\n  addUserKnob \{1 hyref_path l hyref\}\n  addUserKnob \{1 asset_path l path\}\n  addUserKnob \{1 date l \"modified date\"\}\n  addUserKnob \{1 user l \"user name\"\}\n  addUserKnob \{6 deprecated +DISABLED +STARTLINE\}\n  addUserKnob \{26 hydra_divider l \"\" +STARTLINE\}\n  addUserKnob \{22 hydra_refresh l refresh T \"from nuke_weta_base.node.hydra_tab import on_refresh; on_refresh()\" +STARTLINE\}\n  addUserKnob \{26 hydra_metadata -STARTLINE +HIDDEN +INVISIBLE T \"\\\{\\\}\"\}\n \}\n Axis3 \{\n  inputs 0\n  name Axis_a\n  xpos -518\n  ypos 1415\n  addUserKnob \{20 hydra_tab l Hydra\}\n  addUserKnob \{6 sauron_lock l lock t \"Prevents Sauron from updating this node when locked.\" -STARTLINE\}\n  addUserKnob \{1 hyref_path l hyref\}\n  addUserKnob \{1 asset_path l path\}\n  addUserKnob \{1 date l \"modified date\"\}\n  addUserKnob \{1 user l \"user name\"\}\n  addUserKnob \{6 deprecated +DISABLED +STARTLINE\}\n  addUserKnob \{26 hydra_divider l \"\" +STARTLINE\}\n  addUserKnob \{22 hydra_refresh l refresh T \"from nuke_weta_base.node.hydra_tab import on_refresh; on_refresh()\" +STARTLINE\}\n  addUserKnob \{26 hydra_metadata +HIDDEN +INVISIBLE T \"\\\{\\\}\"\}\n \}\n Input \{\n  inputs 0\n  name img\n  xpos -252\n  ypos -813\n  addUserKnob \{20 User\}\n  addUserKnob \{6 existInput +STARTLINE\}\n  existInput \{\{\"!\\\[exists input0]\"\}\}\n \}\n Dot \{\n  name Dot40\n  xpos -218\n  ypos -390\nn \}\nset N55fa7e80 \[stack 0]\n Dot \{\n  name Dot41\n  xpos -327\n  ypos -390\n \}\n DeepToImage \{\n  name DeepToImage12\n  xpos -361\n  ypos -258\n \}\nset N55569500 \[stack 0]\n Dot \{\n  name Dot42\n  xpos -327\n  ypos -175\n \}\npush \$N55fa7e80\n Switch \{\n  inputs 2\n  which \{\{inputData\}\}\n  name SwitchDeep\n  xpos -252\n  ypos -179\n \}\n Dot \{\n  name connectInput\n  xpos -218\n  ypos -85\n \}\nset Nd9aa5ea0 \[stack 0]\n Dot \{\n  name Dot11\n  xpos -218\n  ypos 178\n \}\nset N3bdcb900 \[stack 0]\n Dot \{\n  name Dot12\n  xpos -67\n  ypos 178\n \}\n Dot \{\n  name Dot8\n  xpos -67\n  ypos 4645\n \}\nset N3ce54480 \[stack 0]\n Dot \{\n  name Dot14\n  xpos -67\n  ypos 4822\n \}\nset N3bcc4380 \[stack 0]\n Dot \{\n  name Dot2\n  xpos -67\n  ypos 5852\n \}\npush \$N3bdcb900\n Dot \{\n  name Dot27\n  xpos -1402\n  ypos 178\n \}\nset N3a064d10 \[stack 0]\n Dot \{\n  name Dot28\n  xpos -1402\n  ypos 1898\n \}\nset N3b738e20 \[stack 0]\n Dot \{\n  name Dot36\n  xpos -1492\n  ypos 1898\n \}\n Input \{\n  inputs 0\n  name cam\n  xpos -771\n  ypos -814\n  number 1\n \}\n Dot \{\n  name Dot38\n  xpos -737\n  ypos 582\n \}\nset N304fb750 \[stack 0]\n Dot \{\n  name Dot24\n  xpos -737\n  ypos 1423\n \}\nset N3918def0 \[stack 0]\npush \$N304fb750\npush \$N55569500\n Dot \{\n  name Dot37\n  xpos -1077\n  ypos -254\n \}\n Shuffle \{\n  in depth\n  name Shuffle10\n  label \"\\\[knob in1]\"\n  xpos -1111\n  ypos 534\n \}\nadd_layer \{P P.red P.green P.blue P.alpha\}\n DepthToPosition \{\n  inputs 2\n  output P\n  depth rgba.green\n  invert true\n  far 1000000\n  name DepthToPosition2\n  xpos -1111\n  ypos 572\n \}\n Shuffle \{\n  in P\n  name Shuffle2\n  label \"\\\[knob in1]\"\n  xpos -1111\n  ypos 610\n \}\npush \$N3bdcb900\n Unpremult \{\n  name Unpremult1\n  xpos -252\n  ypos 346\n  disable \{\{!parent.premultiplied\}\}\n \}\n Dot \{\n  name Dot1\n  xpos -218\n  ypos 714\n \}\nset N3d94fec0 \[stack 0]\n Shuffle \{\n  in pref\n  in2 rgba\n  alpha alpha2\n  name ShuffleInImg\n  xpos -975\n  ypos 710\n \}\n Switch \{\n  inputs 2\n  which \{\{inputData\}\}\n  name SwitchDeep2\n  xpos -1111\n  ypos 710\n \}\n Dot \{\n  name Dot13\n  xpos -1077\n  ypos 1067\n \}\nset N3c0d8a70 \[stack 0]\n Dot \{\n  name Dot9\n  xpos -1198\n  ypos 1068\n \}\n BlinkScript \{\n  recompileCount 46\n  ProgramGroup 1\n  KernelDescription \"2 \\\"noise4DKernel\\\" iterate pixelWise d3a3f7f1ea68a6b32419e7071f80560cebd0cec9b60e8bf5f98c6c6913daff6b 2 \\\"p\\\" Read Point \\\"dst\\\" Write Point 38 \\\"picked\\\" Float 3 AAAAAAAAAAAAAAAAAAAAAA== \\\"pickedB\\\" Float 3 AAAAAAAAAAAAAAAAAAAAAA== \\\"m_r\\\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \\\"m_g\\\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \\\"m_b\\\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \\\"m_a\\\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \\\"noise octaves r\\\" Float 1 AAAAPw== \\\"noise octaves g\\\" Float 1 AACAPw== \\\"noise octaves b\\\" Float 1 AAAAQA== \\\"noise octaves a\\\" Float 1 AAAAQA== \\\"noise persistence r\\\" Float 1 AACAPg== \\\"noise persistence g\\\" Float 1 AAAAPw== \\\"noise persistence b\\\" Float 1 AABAPw== \\\"noise persistence a\\\" Float 1 AABAPw== \\\"lacunarity r\\\" Float 1 AADAPw== \\\"lacunarity g\\\" Float 1 AAAAQA== \\\"lacunarity b\\\" Float 1 AAAgQA== \\\"lacunarity a\\\" Float 1 AAAgQA== \\\"noise_offset_r\\\" Float 1 AAAAAA== \\\"noise_offset_g\\\" Float 1 AAAAAA== \\\"noise_offset_b\\\" Float 1 AAAAAA== \\\"noise_offset_a\\\" Float 1 AAAAAA== \\\"noise_add_r\\\" Float 1 AAAAAA== \\\"noise_add_g\\\" Float 1 AAAAAA== \\\"noise_add_b\\\" Float 1 AAAAAA== \\\"noise_add_a\\\" Float 1 AAAAAA== \\\"noise_gain_r\\\" Float 1 AAAAAA== \\\"noise_gain_g\\\" Float 1 AAAAAA== \\\"noise_gain_b\\\" Float 1 AAAAAA== \\\"noise_gain_a\\\" Float 1 AAAAAA== \\\"noise_gamma_r\\\" Float 1 AAAAAA== \\\"noise_gamma_g\\\" Float 1 AAAAAA== \\\"noise_ ngamma_b\\\" Float 1 AAAAAA== \\\"noise_gamma_a\\\" Float 1 AAAAAA== \\\"noise scale r\\\" Float 1 AABIQg== \\\"noise scale g\\\" Float 1 PQpwQg== \\\"noise scale b\\\" Float 1 HwWMQg== \\\"noise scale a\\\" Float 1 HwWMQg== 38 \\\"picked\\\" 3 1 \\\"pickedB\\\" 3 1 \\\"m_r\\\" 16 1 \\\"m_g\\\" 16 1 \\\"m_b\\\" 16 1 \\\"m_a\\\" 16 1 \\\"noise_octaves_r\\\" 1 1 \\\"noise_octaves_g\\\" 1 1 \\\"noise_octaves_b\\\" 1 1 \\\"noise_octaves_a\\\" 1 1 \\\"noise_persistence_r\\\" 1 1 \\\"noise_persistence_g\\\" 1 1 \\\"noise_persistence_b\\\" 1 1 \\\"noise_persistence_a\\\" 1 1 \\\"noise_lacunarity_r\\\" 1 1 \\\"noise_lacunarity_g\\\" 1 1 \\\"noise_lacunarity_b\\\" 1 1 \\\"noise_lacunarity_a\\\" 1 1 \\\"noise_offset_r\\\" 1 1 \\\"noise_offset_g\\\" 1 1 \\\"noise_offset_b\\\" 1 1 \\\"noise_offset_a\\\" 1 1 \\\"noise_add_r\\\" 1 1 \\\"noise_add_g\\\" 1 1 \\\"noise_add_b\\\" 1 1 \\\"noise_add_a\\\" 1 1 \\\"noise_gain_r\\\" 1 1 \\\"noise_gain_g\\\" 1 1 \\\"noise_gain_b\\\" 1 1 \\\"noise_gain_a\\\" 1 1 \\\"noise_gamma_r\\\" 1 1 \\\"noise_gamma_g\\\" 1 1 \\\"noise_gamma_b\\\" 1 1 \\\"noise_gamma_a\\\" 1 1 \\\"noise_scale_r\\\" 1 1 \\\"noise_scale_g\\\" 1 1 \\\"noise_scale_b\\\" 1 1 \\\"noise_scale_a\\\" 1 1 0\"\n  kernelSource \"int fastfloor( const float x ) \\\{ return x > 0 ? (int) x : (int) x - 1; \\\}\\ninline float raw_noise_4d( const float x, const float y, const float z, const float w ) \\n\\\{\\nint simplex\\\[64]\\\[4] = \\\{\\n    \\\{0,1,2,3\\\},\\\{0,1,3,2\\\},\\\{0,0,0,0\\\},\\\{0,2,3,1\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{1,2,3,0\\\},\\n    \\\{0,2,1,3\\\},\\\{0,0,0,0\\\},\\\{0,3,1,2\\\},\\\{0,3,2,1\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{1,3,2,0\\\},\\n    \\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\n    \\\{1,2,0,3\\\},\\\{0,0,0,0\\\},\\\{1,3,0,2\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{2,3,0,1\\\},\\\{2,3,1,0\\\},\\n    \\\{1,0,2,3\\\},\\\{1,0,3,2\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{2,0,3,1\\\},\\\{0,0,0,0\\\},\\\{2,1,3,0\\\},\\n    \\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\n    \\\{2,0,1,3\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{3,0,1,2\\\},\\\{3,0,2,1\\\},\\\{0,0,0,0\\\},\\\{3,1,2,0\\\},\\n    \\\{2,1,0,3\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{3,1,0,2\\\},\\\{0,0,0,0\\\},\\\{3,2,0,1\\\},\\\{3,2,1,0\\\}\\n\\\};\\n    int perm\\\[512] = \\\{\\n        151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,\\n        8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,\\n        35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,\\n        134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,\\n        55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208, 89,\\n        18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,\\n        250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,\\n        189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,\\n        172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,\\n        228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,\\n        107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,\\n        138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,\\n\\n        151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,\\n        8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,\\n        35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,\\n        134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,\\n        55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208, 89,\\n        18,169,200,196,135,130,116,188,159,86,\n\n164,100,109,198,173,186,3,64,52,217,226,\\n        250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,\\n        189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,\\n        172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,\\n        228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,\\n        107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,\\n        138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180\\n    \\\};\\n  int grad4\\\[32]\\\[4]= \\\{\\n    \\\{0,1,1,1\\\},  \\\{0,1,1,-1\\\},  \\\{0,1,-1,1\\\},  \\\{0,1,-1,-1\\\},\\n    \\\{0,-1,1,1\\\}, \\\{0,-1,1,-1\\\}, \\\{0,-1,-1,1\\\}, \\\{0,-1,-1,-1\\\},\\n    \\\{1,0,1,1\\\},  \\\{1,0,1,-1\\\},  \\\{1,0,-1,1\\\},  \\\{1,0,-1,-1\\\},\\n    \\\{-1,0,1,1\\\}, \\\{-1,0,1,-1\\\}, \\\{-1,0,-1,1\\\}, \\\{-1,0,-1,-1\\\},\\n    \\\{1,1,0,1\\\},  \\\{1,1,0,-1\\\},  \\\{1,-1,0,1\\\},  \\\{1,-1,0,-1\\\},\\n    \\\{-1,1,0,1\\\}, \\\{-1,1,0,-1\\\}, \\\{-1,-1,0,1\\\}, \\\{-1,-1,0,-1\\\},\\n    \\\{1,1,1,0\\\},  \\\{1,1,-1,0\\\},  \\\{1,-1,1,0\\\},  \\\{1,-1,-1,0\\\},\\n    \\\{-1,1,1,0\\\}, \\\{-1,1,-1,0\\\}, \\\{-1,-1,1,0\\\}, \\\{-1,-1,-1,0\\\}\\n  \\\};\\n    float F4 = (sqrt(5.0f)-1.0)/4.0;\\n    float G4 = (5.0-sqrt(5.0f))/20.0;\\n    float n0, n1, n2, n3, n4;\\n    float s = (x + y + z + w) * F4;\\n    int i = fastfloor(x + s);\\n    int j = fastfloor(y + s);\\n    int k = fastfloor(z + s);\\n    int l = fastfloor(w + s);\\n    float t = (i + j + k + l) * G4;\\n    float X0 = i - t;\\n    float Y0 = j - t;\\n    float Z0 = k - t;\\n    float W0 = l - t;\\n\\n    float x0 = x - X0;\\n    float y0 = y - Y0;\\n    float z0 = z - Z0;\\n    float w0 = w - W0;\\n    int c1 = (x0 > y0) ? 32 : 0;\\n    int c2 = (x0 > z0) ? 16 : 0;\\n    int c3 = (y0 > z0) ? 8 : 0;\\n    int c4 = (x0 > w0) ? 4 : 0;\\n    int c5 = (y0 > w0) ? 2 : 0;\\n    int c6 = (z0 > w0) ? 1 : 0;\\n    int c = c1 + c2 + c3 + c4 + c5 + c6;\\n\\n    int i1, j1, k1, l1;\\n    int i2, j2, k2, l2;\\n    int i3, j3, k3, l3;\\n    i1 = simplex\\\[c]\\\[0]>=3 ? 1 : 0;\\n    j1 = simplex\\\[c]\\\[1]>=3 ? 1 : 0;\\n    k1 = simplex\\\[c]\\\[2]>=3 ? 1 : 0;\\n    l1 = simplex\\\[c]\\\[3]>=3 ? 1 : 0;\\n    i2 = simplex\\\[c]\\\[0]>=2 ? 1 : 0;\\n    j2 = simplex\\\[c]\\\[1]>=2 ? 1 : 0;\\n    k2 = simplex\\\[c]\\\[2]>=2 ? 1 : 0;\\n    l2 = simplex\\\[c]\\\[3]>=2 ? 1 : 0;\\n    i3 = simplex\\\[c]\\\[0]>=1 ? 1 : 0;\\n    j3 = simplex\\\[c]\\\[1]>=1 ? 1 : 0;\\n    k3 = simplex\\\[c]\\\[2]>=1 ? 1 : 0;\\n    l3 = simplex\\\[c]\\\[3]>=1 ? 1 : 0;\\n    float x1 = x0 - i1 + G4;\\n    float y1 = y0 - j1 + G4;\\n    float z1 = z0 - k1 + G4;\\n    float w1 = w0 - l1 + G4;\\n    float x2 = x0 - i2 + 2.0*G4;\\n    float y2 = y0 - j2 + 2.0*G4;\\n    float z2 = z0 - k2 + 2.0*G4;\\n    float w2 = w0 - l2 + 2.0*G4;\\n    float x3 = x0 - i3 + 3.0*G4;\\n    float y3 = y0 - j3 + 3.0*G4;\\n    float z3 = z0 - k3 + 3.0*G4;\\n    float w3 = w0 - l3 + 3.0*G4;\\n    float x4 = x0 - 1.0 + 4.0*G4;\\n    float y4 = y0 - 1.0 + 4.0*G4;\\n    float z4 = z0 - 1.0 + 4.0*G4;\\n    float w4 = w0 - 1.0 + 4.0*G4;\\n    int ii = i & 255;\\n    int jj = j & 255;\\n    int kk = k & 255;\\n    int ll = l & 255;\\n    int gi0 = perm\\\[ii+perm\\\[jj+perm\\\[kk+perm\\\[ll]]]] % 32;\\n    int gi1 = perm\\\[ii+i1+perm\\\[jj+j1+perm\\\[kk+k1+perm\\\[ll+l1]]]] % 32;\\n    int gi2 = perm\\\[ii+i2+perm\\\[jj+j2+perm\\\[kk+k2+perm\\\[ll+l2]]]] % 32;\\n    int gi3 = perm\\\[ii+i3+perm\\\[jj+j3+perm\\\[kk+k3+perm\\\[ll+l3]]]] % 32;\\n    int gi4 = perm\\\[ii+1+perm\\\[jj+1+perm\\\[kk+1+perm\\\[ll+1]]]] % 32;\\n    float t0 = 0.6 - x0*x0 - y0*y0 - z0*z0 - w0*w0;\\n    if(t0<0) n0 = 0.0;\\n    else \\\{\\n        t0 *= t0;\\n        n0 = t0 * t0 * dot(float4(grad4\\\[gi0]\\\[0],grad4\\\[gi0]\\\[2],grad4\\\[gi0]\\\[3],grad4\\\[gi0]\\\[3]), float4(x0, y0, z0, w0));\\n    \\\}\\n    float t1 = 0.6 - x1*x1 - y1*y1 - z1*z1 - w1*w1;\\n    if(t1<0) n1 = 0.0;\\n    else \\\{\\n        t1 *= t1;\\n        n1 = t1 * t1 * dot(float4(grad4\\\[\n\ngi1]\\\[0],grad4\\\[gi1]\\\[2],grad4\\\[gi1]\\\[3],grad4\\\[gi1]\\\[3]), float4(x1, y1, z1, w1));\\n    \\\}\\n    float t2 = 0.6 - x2*x2 - y2*y2 - z2*z2 - w2*w2;\\n    if(t2<0) n2 = 0.0;\\n    else \\\{\\n        t2 *= t2;\\n        n2 = t2 * t2 * dot(float4(grad4\\\[gi2]\\\[0],grad4\\\[gi2]\\\[2],grad4\\\[gi2]\\\[3],grad4\\\[gi2]\\\[3]), float4(x2, y2, z2, w2));\\n    \\\}\\n    float t3 = 0.6 - x3*x3 - y3*y3 - z3*z3 - w3*w3;\\n    if(t3<0) n3 = 0.0;\\n    else \\\{\\n        t3 *= t3;\\n        n3 = t3 * t3 * dot(float4(grad4\\\[gi3]\\\[0],grad4\\\[gi3]\\\[2],grad4\\\[gi3]\\\[3],grad4\\\[gi3]\\\[3]), float4(x3, y3, z3, w3));\\n    \\\}\\n    float t4 = 0.6 - x4*x4 - y4*y4 - z4*z4 - w4*w4;\\n    if(t4<0) n4 = 0.0;\\n    else \\\{\\n        t4 *= t4;\\n        n4 = t4 * t4 * dot(float4(grad4\\\[gi4]\\\[0],grad4\\\[gi4]\\\[2],grad4\\\[gi4]\\\[3],grad4\\\[gi4]\\\[3]), float4(x4, y4, z4, w4));\\n    \\\}\\n    return 27.0 * (n0 + n1 + n2 + n3 + n4);\\n\\\}\\ninline float octave_noise_4d( const float octaves, const float persistence, const float scale, const float x, const float y, const float z, const float w, const float lacunarity=2 ) \\n\\\{\\n    float total = 0;\\n    float frequency = scale;\\n    float amplitude = 1;\\n    float maxAmplitude = 0;\\n    for( int i=0; i < octaves; i++ ) \\\{\\n        total += (float)raw_noise_4d( x * frequency, y * frequency, z * frequency, w * frequency ) * amplitude;\\n\\n        frequency *= lacunarity;\\n        maxAmplitude += amplitude;\\n        amplitude *= persistence;\\n    \\\}\\n    return float(total / maxAmplitude);\\n\\\}\\n\\n\\n\\nkernel noise4DKernel : ImageComputationKernel<ePixelWise>\\n\\\{\\n  Image<eRead, eAccessPoint, eEdgeClamped> p;\\n  Image<eWrite> dst;\\n\\n  param:\\n    float3 picked; //Center, or white for ramps\\n    float3 pickedB; //Black for ramps\\n    float4x4 m_r; //Camera or axis matrix.\\n    float4x4 m_g; //Camera or axis matrix.\\n    float4x4 m_b; //Camera or axis matrix.\\n    float4x4 m_a; //Camera or axis matrix.\\n\\n\\n    // Noise parameters\\n    float noise_octaves_r;\\n    float noise_octaves_g;\\n    float noise_octaves_b;\\n    float noise_octaves_a;\\n    float noise_persistence_r;\\n    float noise_persistence_g;\\n    float noise_persistence_b;\\n    float noise_persistence_a;\\n    float noise_lacunarity_r;\\n    float noise_lacunarity_g;\\n    float noise_lacunarity_b;\\n    float noise_lacunarity_a;\\n    float noise_offset_r;\\n    float noise_offset_g;\\n    float noise_offset_b;\\n    float noise_offset_a;\\n    float noise_add_r;\\n    float noise_add_g;\\n    float noise_add_b;\\n    float noise_add_a;\\n    float noise_gain_r;\\n    float noise_gain_g;\\n    float noise_gain_b;\\n    float noise_gain_a;\\n    float noise_gamma_r;\\n    float noise_gamma_g;\\n    float noise_gamma_b;\\n    float noise_gamma_a;\\n    float noise_scale_r;\\n    float noise_scale_g;\\n    float noise_scale_b;\\n    float noise_scale_a;\\n\\n\\n\\n\\n\\n  void define() \\\{\\n    defineParam(noise_octaves_r, \\\"noise octaves r\\\", 0.5f);\\n    defineParam(noise_octaves_g, \\\"noise octaves g\\\", 1.0f);\\n    defineParam(noise_octaves_b, \\\"noise octaves b\\\", 2.0f);\\n    defineParam(noise_octaves_a, \\\"noise octaves a\\\", 2.0f);\\n    defineParam(noise_persistence_r, \\\"noise persistence r\\\",  0.25f);\\n    defineParam(noise_persistence_g, \\\"noise persistence g\\\",  0.5f);\\n    defineParam(noise_persistence_b, \\\"noise persistence b\\\",  0.75f);\\n    defineParam(noise_persistence_a, \\\"noise persistence a\\\",  0.75f);\\n    defineParam(noise_lacunarity_r, \\\"lacunarity r\\\",  1.5f);\\n    defineParam(noise_lacunarity_g, \\\"lacunarity g\\\",  2.0f);\\n    defineParam(noise_lacunarity_b, \\\"lacunarity b\\\",  2.5f);\\n    defineParam(noise_lacunarity_a, \\\"lacunarity a\\\",  2.5f);\\n    defineParam(noise_scale_r, \\\"noise scale r\\\", 50.f);\\n    defineParam(noise_scale_g, \\\"noise scale g\\\", 60.01f);\\n    defineParam(noise_scale_b, \\\"noise scale b\\\", 70.01f);\\n    defineParam(noise_scale_a, \\\"noise  nscale a\\\", 70.01f);\\n\\n  \\\}\\n\\n\\n  inline float rad(float deg)\\\{ \\n    return deg*PI/180;\\n  \\\}\\n\\n  inline float smoothstep(float edge0, float edge1, float x)\\\{\\n    x = clamp((x - edge0)/(edge1 - edge0), 0.0f, 1.0f);\\n    return x*x*x*(x*(x*6-15)+10);\\n  \\\}\\n\\n  inline float cl(float val)\\\{\\n  return clamp(val,0.0f,1.0f); \\n  \\\}\\n\\n\\n  void process() \\\{\\n    //1. P WORLD\\n    // Center the coordinates\\n    float3 color_r = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z);\\n    float3 color_g = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z);\\n    float3 color_b = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z);   \\n    float3 color_a = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z); \\n    int black = 0;\\n    \\n    // Matrix!\\n    float4x4 mr = m_r;\\n    mr = mr.invert();\\n    for(int c = 0; c<dst.kComps; c++)\\\{\\n      color_r\\\[c] = mr\\\[c]\\\[0]*color_r\\\[0] + mr\\\[c]\\\[1]*color_r\\\[1] + mr\\\[c]\\\[2]*color_r\\\[2] + mr\\\[c]\\\[3]*1.0f;\\n    \\\}\\n\\n    \\n    float4x4 mg = m_g;\\n    mg = mg.invert();\\n    for(int c = 0; c<dst.kComps; c++)\\\{\\n      color_g\\\[c] = mg\\\[c]\\\[0]*color_g\\\[0] + mg\\\[c]\\\[1]*color_g\\\[1] + mg\\\[c]\\\[2]*color_g\\\[2] + mg\\\[c]\\\[3]*1.0f;\\n    \\\}\\n\\n\\n    float4x4 mb = m_b;\\n    mg = mg.invert();\\n    for(int c = 0; c<dst.kComps; c++)\\\{\\n      color_b\\\[c] = mb\\\[c]\\\[0]*color_b\\\[0] + mb\\\[c]\\\[1]*color_b\\\[1] + mb\\\[c]\\\[2]*color_b\\\[2] + mb\\\[c]\\\[3]*1.0f;\\n    \\\}\\n\\n\\n    float4x4 ma = m_a;\\n    mg = mg.invert();\\n    for(int c = 0; c<dst.kComps; c++)\\\{\\n      color_a\\\[c] = ma\\\[c]\\\[0]*color_a\\\[0] + ma\\\[c]\\\[1]*color_a\\\[1] + ma\\\[c]\\\[2]*color_a\\\[2] + ma\\\[c]\\\[3]*1.0f;\\n    \\\}\\n\\n\\n    //2. SHAPES\\n    float dist;\\n\\n\\n    // 1. Genera el ruido para cada canal por separado\\n    float noise_r = (float)octave_noise_4d(float(noise_octaves_r),noise_persistence_r,noise_scale_r==0?10000.0f:1/noise_scale_r,color_r\\\[0],color_r\\\[1],color_r\\\[2],noise_offset_r,noise_lacunarity_r);\\n    float noise_g = (float)octave_noise_4d(float(noise_octaves_g),noise_persistence_g,noise_scale_g==0?10000.0f:1/noise_scale_g,color_g\\\[0],color_g\\\[1],color_g\\\[2],noise_offset_g,noise_lacunarity_g);\\n    float noise_b = (float)octave_noise_4d(float(noise_octaves_b),noise_persistence_b,noise_scale_b==0?10000.0f:1/noise_scale_b,color_b\\\[0],color_b\\\[1],color_b\\\[2],noise_offset_b,noise_lacunarity_b);\\n    float noise_a = (float)octave_noise_4d(float(noise_octaves_a),noise_persistence_a,noise_scale_a==0?10000.0f:1/noise_scale_a,color_a\\\[0],color_a\\\[1],color_a\\\[2],noise_offset_a,noise_lacunarity_a);\\n\\n    // 2. Aplica las operaciones de adición, ganancia y gamma en cada canal\\n    noise_r = cl(pow(max((noise_r+noise_add_r)*noise_gain_r,0.0f),noise_gamma_r==0?1:1/noise_gamma_r));\\n    noise_g = cl(pow(max((noise_g+noise_add_g)*noise_gain_g,0.0f),noise_gamma_g==0?1:1/noise_gamma_g));\\n    noise_b = cl(pow(max((noise_b+noise_add_b)*noise_gain_b,0.0f),noise_gamma_b==0?1:1/noise_gamma_b));\\n    noise_a = cl(pow(max((noise_a+noise_add_a)*noise_gain_a,0.0f),noise_gamma_a==0?1:1/noise_gamma_a));\\n\\n\\n\\n    // 3. Combina los canales en un solo píxel de salida\\n    float4 result = float4(noise_r, noise_g, noise_b, noise_a);\\n    // float4 resultExtra = float4(noiseExtra_r, noiseExtra_g, noiseExtra_b, noiseExtra_a);\\n\\n    // 4. Asigna el resultado a los canales de salida RGB\\n    dst() = result;\\n\\n  \\\}\\n\\\};\"\n  useGPUIfAvailable true\n  rebuild \"\"\n  noise4DKernel_picked \{\{(parent.shape==3&&parent.mirrored)?picker-(black_point-picker):(parent.shape==5&&parent.mirrored)?picker-radius:picker\} \{(parent.shape==3&&parent.mirrored)?picker-(black_point-picker):(parent.shape==5&&parent.mirrored)?picker-radius:picker\} \{(parent.shape==3&&parent.mirrored)?picker-(black_point-picker):(parent.shape==5&&parent.mirrored)?picker-radius:picker\}\}\n  noise4DKernel_pickedB \{\{parent.shape==5?parent.axis==0?picker+radius+0.0001:picker:black_ npoint\} \{parent.shape==5?parent.axis==1?picker+radius+0.0001:picker:black_point\} \{parent.shape==5?parent.axis==2?picker+radius+0.0001:picker+0.00001:black_point\}\}\n  noise4DKernel_m_r \{\n      \{\{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\}\}\n      \{\{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\}\}\n      \{\{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\}\}\n      \{\{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\}\}\n    \}\n  noise4DKernel_m_g \{\n      \{\{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\}\}\n      \{\{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\}\}\n      \{\{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\}\}\n      \{\{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\}\}\n    \}\n  noise4DKernel_m_b \{\n      \{\{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\}\}\n      \{\{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\}\}\n      \{\{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\}\}\n      \{\{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\}\}\n    \}\n  group_noise4DKernel_m_a 1\n  noise4DKernel_m_a \{\n      \{\{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\}\}\n      \{\{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\}\}\n      \{\{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\}\}\n      \{\{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\}\}\n    \}\n  \"noise4DKernel_noise octaves r\" \{\{parent.lumOctaves+1\}\}\n  \"noise4DKernel_noise octaves g\" \{\{parent.contOctaves+2\}\}\n  \"noise4DKernel_noise octaves b\" \{\{parent.contOctaves+1\}\}\n  \"noise4DKernel_noise octaves a\" \{\{parent.maskOctaves+1\}\}\n  \"noise4DKernel_noise persistence r\" \{\{parent.lumPersistence+.4\}\}\n  \"noise4DKernel_noise persistence g\" \{\{parent.contPersistence+.1\}\}\n  \"noise4DKernel_noise persistence b\" \{\{parent.contPersistence+1\}\}\n  \"noise4DKernel_noise persistence a\" \{\{parent.maskPersistence\}\}\n  \"noise4DKernel_lacunarity r\" \{\{parent.lumLacunarity-.2\}\}\n  \"noise4DKernel_lacunarity g\" \{\{parent.conLacunarity\}\}\n  \"noise4DKernel_lacunarity b\" \{\{parent.conLacunarity-1\}\}\n  \"noise4DKernel_lacunarity a\" \{\{parent.maskLacunarity\}\}\n  noise4DKernel_noise_offset_r \{\{parent.lumOffset+100\}\}\n  noise4DKernel_noise_offset_g \{\{parent.contOffset+150\}\}\n  noise4DKernel_noise_offset_b \{\{parent.satOffset+200\}\}\n  noise4DKernel_noise_offset_a \{\{parent.maskOffset+200\}\}\n  noise4DKernel_noise_add_r 0.55\n  noise4DKernel_noise_add_g 0.588\n  noise4DKernel_noise_add_b 0.5\n  noise4DKernel_noise_add_a 0.75\n  noise4DKernel_noise_gain_r \{\{parent.lumGain*1.25\}\}\n  noise4DKernel_noise_gain_g \{\{parent.contGain*1.1\}\}\n  noise4DKernel_noise_gain_b \{\{parent.contGain*1.1\}\}\n  noise4DKernel_noise_gain_a \{\{parent.maskGain\}\}\n  noise4DKernel_noise_gamma_r \{\{parent.lumGamma\}\}\n  noise4DKernel_noise_gamma_g \{\{parent.contGamma/1.5\}\}\n  noise4DKernel_noise_gamma_b \{\{parent.contGamma*1.5\}\}\n   nnoise4DKernel_noise_gamma_a \{\{parent.maskGamma\}\}\n  \"noise4DKernel_noise scale r\" \{\{parent.menu.noiseScaleR.h*3.3\}\}\n  \"noise4DKernel_noise scale g\" \{\{parent.menu.noiseScaleG.h*1.15\}\}\n  \"noise4DKernel_noise scale b\" \{\{parent.menu.noiseScaleG.h*1.15\}\}\n  \"noise4DKernel_noise scale a\" \{\{parent.menu.noiseScaleA.h\}\}\n  rebuild_finalise \"\"\n  name BlinkScriptPMatte1\n  xpos -1232\n  ypos 1301\n  addUserKnob \{20 User\}\n  addUserKnob \{18 picker\}\n  picker \{0 0 0\}\n  addUserKnob \{6 picker_panelDropped l \"panel dropped state\" -STARTLINE +HIDDEN\}\n  addUserKnob \{6 picker_panelDropped_1 l \"panel dropped state\" -STARTLINE +HIDDEN\}\n  addUserKnob \{18 black_point l black\}\n  black_point \{0 0 0\}\n  addUserKnob \{6 black_point_panelDropped l \"panel dropped state\" -STARTLINE +HIDDEN\}\n  addUserKnob \{6 black_point_panelDropped_1 l \"panel dropped state\" -STARTLINE +HIDDEN\}\n \}\n AdjBBox \{\n  name AdjBBox1\n  xpos -1232\n  ypos 1339\n \}\n Soften \{\n  channels rgba\n  amount 1\n  size 1\n  name Soften2\n  xpos -1232\n  ypos 1365\n \}\n MotionBlur3D \{\n  inputs 2\n  Z depth.Z\n  distance \{\{parent.MotionBlur3D1.distance\}\}\n  shutter \{\{parent.MotionBlur3D1.shutter\}\}\n  shutteroffset centred\n  name MotionBlur3D2\n  xpos -1232\n  ypos 1419\n  disable \{\{!motionBlur\}\}\n \}\n VectorBlur \{\n  channels \{\{\{parent.VectorBlur2.channels\}\}\}\n  uv \{\{\{parent.VectorBlur2.uv\}\}\}\n  constant \{\{parent.VectorBlur2.constant\} \{parent.VectorBlur2.constant\}\}\n  scale \{\{parent.VectorBlur2.scale\}\}\n  offset \{\{parent.VectorBlur2.offset\}\}\n  grow_bbox \{\{parent.VectorBlur2.grow_bbox\}\}\n  name VectorBlur1\n  xpos -1232\n  ypos 1445\n  disable \{\{!motionBlur\}\}\n \}\n Dot \{\n  name Dot21\n  xpos -1198\n  ypos 2039\n \}\nset Nd99997d0 \[stack 0]\n Merge2 \{\n  inputs 2\n  operation mask\n  bbox B\n  name Merge14\n  xpos -1526\n  ypos 2035\n \}\npush \$N3b738e20\npush \$N3918def0\n Dot \{\n  name Dot23\n  xpos -737\n  ypos 1453\n \}\npush \$N3c0d8a70\n BlinkScript \{\n  recompileCount 58\n  ProgramGroup 1\n  KernelDescription \"2 \\\"noise4DKernel\\\" iterate pixelWise d3a3f7f1ea68a6b32419e7071f80560cebd0cec9b60e8bf5f98c6c6913daff6b 2 \\\"p\\\" Read Point \\\"dst\\\" Write Point 38 \\\"picked\\\" Float 3 AAAAAAAAAAAAAAAAAAAAAA== \\\"pickedB\\\" Float 3 AAAAAAAAAAAAAAAAAAAAAA== \\\"m_r\\\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \\\"m_g\\\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \\\"m_b\\\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \\\"m_a\\\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \\\"noise octaves r\\\" Float 1 AAAAPw== \\\"noise octaves g\\\" Float 1 AACAPw== \\\"noise octaves b\\\" Float 1 AAAAQA== \\\"noise octaves a\\\" Float 1 AAAAQA== \\\"noise persistence r\\\" Float 1 AACAPg== \\\"noise persistence g\\\" Float 1 AAAAPw== \\\"noise persistence b\\\" Float 1 AABAPw== \\\"noise persistence a\\\" Float 1 AABAPw== \\\"lacunarity r\\\" Float 1 AADAPw== \\\"lacunarity g\\\" Float 1 AAAAQA== \\\"lacunarity b\\\" Float 1 AAAgQA== \\\"lacunarity a\\\" Float 1 AAAgQA== \\\"noise_offset_r\\\" Float 1 AAAAAA== \\\"noise_offset_g\\\" Float 1 AAAAAA== \\\"noise_offset_b\\\" Float 1 AAAAAA== \\\"noise_offset_a\\\" Float 1 AAAAAA== \\\"noise_add_r\\\" Float 1 AAAAAA== \\\"noise_add_g\\\" Float 1 AAAAAA== \\\"noise_add_b\\\" Float 1 AAAAAA== \\\"noise_add_a\\\" Float 1 AAAAAA== \\\"noise_gain_r\\\" Float 1 AAAAAA== \\\"noise_gain_g\\\" Float 1 AAAAAA== \\\"noise_gain_b\\\" Float 1 AAAAAA== \\\"noise_gain_a\\\" Float 1 AAAAAA== \\\"noise_gamma_r\\\" Float 1 AAAAAA== \\\"noise_gamma_g\\\" Float 1 AAAAAA== \\\"noise_gamma_b\\\" Float 1 AAAAAA== \\\"noise_gamma_a\\\" Float 1 AAAAAA== \\\"noise scale r\\\" Float 1 AABIQg== \\\"noise scale g\\\" Float 1 PQpwQg== \\\"noise scale b\\\" Float 1 HwWMQg== \\\"noise scale a\\\" Float 1 HwWMQg== 38 \\\"picked\\\"\n\n3 1 \\\"pickedB\\\" 3 1 \\\"m_r\\\" 16 1 \\\"m_g\\\" 16 1 \\\"m_b\\\" 16 1 \\\"m_a\\\" 16 1 \\\"noise_octaves_r\\\" 1 1 \\\"noise_octaves_g\\\" 1 1 \\\"noise_octaves_b\\\" 1 1 \\\"noise_octaves_a\\\" 1 1 \\\"noise_persistence_r\\\" 1 1 \\\"noise_persistence_g\\\" 1 1 \\\"noise_persistence_b\\\" 1 1 \\\"noise_persistence_a\\\" 1 1 \\\"noise_lacunarity_r\\\" 1 1 \\\"noise_lacunarity_g\\\" 1 1 \\\"noise_lacunarity_b\\\" 1 1 \\\"noise_lacunarity_a\\\" 1 1 \\\"noise_offset_r\\\" 1 1 \\\"noise_offset_g\\\" 1 1 \\\"noise_offset_b\\\" 1 1 \\\"noise_offset_a\\\" 1 1 \\\"noise_add_r\\\" 1 1 \\\"noise_add_g\\\" 1 1 \\\"noise_add_b\\\" 1 1 \\\"noise_add_a\\\" 1 1 \\\"noise_gain_r\\\" 1 1 \\\"noise_gain_g\\\" 1 1 \\\"noise_gain_b\\\" 1 1 \\\"noise_gain_a\\\" 1 1 \\\"noise_gamma_r\\\" 1 1 \\\"noise_gamma_g\\\" 1 1 \\\"noise_gamma_b\\\" 1 1 \\\"noise_gamma_a\\\" 1 1 \\\"noise_scale_r\\\" 1 1 \\\"noise_scale_g\\\" 1 1 \\\"noise_scale_b\\\" 1 1 \\\"noise_scale_a\\\" 1 1 0\"\n  kernelSource \"int fastfloor( const float x ) \\\{ return x > 0 ? (int) x : (int) x - 1; \\\}\\ninline float raw_noise_4d( const float x, const float y, const float z, const float w ) \\n\\\{\\nint simplex\\\[64]\\\[4] = \\\{\\n    \\\{0,1,2,3\\\},\\\{0,1,3,2\\\},\\\{0,0,0,0\\\},\\\{0,2,3,1\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{1,2,3,0\\\},\\n    \\\{0,2,1,3\\\},\\\{0,0,0,0\\\},\\\{0,3,1,2\\\},\\\{0,3,2,1\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{1,3,2,0\\\},\\n    \\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\n    \\\{1,2,0,3\\\},\\\{0,0,0,0\\\},\\\{1,3,0,2\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{2,3,0,1\\\},\\\{2,3,1,0\\\},\\n    \\\{1,0,2,3\\\},\\\{1,0,3,2\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{2,0,3,1\\\},\\\{0,0,0,0\\\},\\\{2,1,3,0\\\},\\n    \\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\n    \\\{2,0,1,3\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{3,0,1,2\\\},\\\{3,0,2,1\\\},\\\{0,0,0,0\\\},\\\{3,1,2,0\\\},\\n    \\\{2,1,0,3\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{0,0,0,0\\\},\\\{3,1,0,2\\\},\\\{0,0,0,0\\\},\\\{3,2,0,1\\\},\\\{3,2,1,0\\\}\\n\\\};\\n    int perm\\\[512] = \\\{\\n        151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,\\n        8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,\\n        35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,\\n        134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,\\n        55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208, 89,\\n        18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,\\n        250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,\\n        189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,\\n        172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,\\n        228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,\\n        107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,\\n        138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,\\n\\n        151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,\\n        8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,\\n        35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,\\n        134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,\\n        55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208, 89,\\n        18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,\\n        250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,\\n        189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,\\n        172,9,129,22,\n\n39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,\\n        228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,\\n        107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,\\n        138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180\\n    \\\};\\n  int grad4\\\[32]\\\[4]= \\\{\\n    \\\{0,1,1,1\\\},  \\\{0,1,1,-1\\\},  \\\{0,1,-1,1\\\},  \\\{0,1,-1,-1\\\},\\n    \\\{0,-1,1,1\\\}, \\\{0,-1,1,-1\\\}, \\\{0,-1,-1,1\\\}, \\\{0,-1,-1,-1\\\},\\n    \\\{1,0,1,1\\\},  \\\{1,0,1,-1\\\},  \\\{1,0,-1,1\\\},  \\\{1,0,-1,-1\\\},\\n    \\\{-1,0,1,1\\\}, \\\{-1,0,1,-1\\\}, \\\{-1,0,-1,1\\\}, \\\{-1,0,-1,-1\\\},\\n    \\\{1,1,0,1\\\},  \\\{1,1,0,-1\\\},  \\\{1,-1,0,1\\\},  \\\{1,-1,0,-1\\\},\\n    \\\{-1,1,0,1\\\}, \\\{-1,1,0,-1\\\}, \\\{-1,-1,0,1\\\}, \\\{-1,-1,0,-1\\\},\\n    \\\{1,1,1,0\\\},  \\\{1,1,-1,0\\\},  \\\{1,-1,1,0\\\},  \\\{1,-1,-1,0\\\},\\n    \\\{-1,1,1,0\\\}, \\\{-1,1,-1,0\\\}, \\\{-1,-1,1,0\\\}, \\\{-1,-1,-1,0\\\}\\n  \\\};\\n    float F4 = (sqrt(5.0f)-1.0)/4.0;\\n    float G4 = (5.0-sqrt(5.0f))/20.0;\\n    float n0, n1, n2, n3, n4;\\n    float s = (x + y + z + w) * F4;\\n    int i = fastfloor(x + s);\\n    int j = fastfloor(y + s);\\n    int k = fastfloor(z + s);\\n    int l = fastfloor(w + s);\\n    float t = (i + j + k + l) * G4;\\n    float X0 = i - t;\\n    float Y0 = j - t;\\n    float Z0 = k - t;\\n    float W0 = l - t;\\n\\n    float x0 = x - X0;\\n    float y0 = y - Y0;\\n    float z0 = z - Z0;\\n    float w0 = w - W0;\\n    int c1 = (x0 > y0) ? 32 : 0;\\n    int c2 = (x0 > z0) ? 16 : 0;\\n    int c3 = (y0 > z0) ? 8 : 0;\\n    int c4 = (x0 > w0) ? 4 : 0;\\n    int c5 = (y0 > w0) ? 2 : 0;\\n    int c6 = (z0 > w0) ? 1 : 0;\\n    int c = c1 + c2 + c3 + c4 + c5 + c6;\\n\\n    int i1, j1, k1, l1;\\n    int i2, j2, k2, l2;\\n    int i3, j3, k3, l3;\\n    i1 = simplex\\\[c]\\\[0]>=3 ? 1 : 0;\\n    j1 = simplex\\\[c]\\\[1]>=3 ? 1 : 0;\\n    k1 = simplex\\\[c]\\\[2]>=3 ? 1 : 0;\\n    l1 = simplex\\\[c]\\\[3]>=3 ? 1 : 0;\\n    i2 = simplex\\\[c]\\\[0]>=2 ? 1 : 0;\\n    j2 = simplex\\\[c]\\\[1]>=2 ? 1 : 0;\\n    k2 = simplex\\\[c]\\\[2]>=2 ? 1 : 0;\\n    l2 = simplex\\\[c]\\\[3]>=2 ? 1 : 0;\\n    i3 = simplex\\\[c]\\\[0]>=1 ? 1 : 0;\\n    j3 = simplex\\\[c]\\\[1]>=1 ? 1 : 0;\\n    k3 = simplex\\\[c]\\\[2]>=1 ? 1 : 0;\\n    l3 = simplex\\\[c]\\\[3]>=1 ? 1 : 0;\\n    float x1 = x0 - i1 + G4;\\n    float y1 = y0 - j1 + G4;\\n    float z1 = z0 - k1 + G4;\\n    float w1 = w0 - l1 + G4;\\n    float x2 = x0 - i2 + 2.0*G4;\\n    float y2 = y0 - j2 + 2.0*G4;\\n    float z2 = z0 - k2 + 2.0*G4;\\n    float w2 = w0 - l2 + 2.0*G4;\\n    float x3 = x0 - i3 + 3.0*G4;\\n    float y3 = y0 - j3 + 3.0*G4;\\n    float z3 = z0 - k3 + 3.0*G4;\\n    float w3 = w0 - l3 + 3.0*G4;\\n    float x4 = x0 - 1.0 + 4.0*G4;\\n    float y4 = y0 - 1.0 + 4.0*G4;\\n    float z4 = z0 - 1.0 + 4.0*G4;\\n    float w4 = w0 - 1.0 + 4.0*G4;\\n    int ii = i & 255;\\n    int jj = j & 255;\\n    int kk = k & 255;\\n    int ll = l & 255;\\n    int gi0 = perm\\\[ii+perm\\\[jj+perm\\\[kk+perm\\\[ll]]]] % 32;\\n    int gi1 = perm\\\[ii+i1+perm\\\[jj+j1+perm\\\[kk+k1+perm\\\[ll+l1]]]] % 32;\\n    int gi2 = perm\\\[ii+i2+perm\\\[jj+j2+perm\\\[kk+k2+perm\\\[ll+l2]]]] % 32;\\n    int gi3 = perm\\\[ii+i3+perm\\\[jj+j3+perm\\\[kk+k3+perm\\\[ll+l3]]]] % 32;\\n    int gi4 = perm\\\[ii+1+perm\\\[jj+1+perm\\\[kk+1+perm\\\[ll+1]]]] % 32;\\n    float t0 = 0.6 - x0*x0 - y0*y0 - z0*z0 - w0*w0;\\n    if(t0<0) n0 = 0.0;\\n    else \\\{\\n        t0 *= t0;\\n        n0 = t0 * t0 * dot(float4(grad4\\\[gi0]\\\[0],grad4\\\[gi0]\\\[2],grad4\\\[gi0]\\\[3],grad4\\\[gi0]\\\[3]), float4(x0, y0, z0, w0));\\n    \\\}\\n    float t1 = 0.6 - x1*x1 - y1*y1 - z1*z1 - w1*w1;\\n    if(t1<0) n1 = 0.0;\\n    else \\\{\\n        t1 *= t1;\\n        n1 = t1 * t1 * dot(float4(grad4\\\[gi1]\\\[0],grad4\\\[gi1]\\\[2],grad4\\\[gi1]\\\[3],grad4\\\[gi1]\\\[3]), float4(x1, y1, z1, w1));\\n    \\\}\\n    float t2 = 0.6 - x2*x2 - y2*y2 - z2*z2 - w2*w2;\\n    if(t2<0) n2 = 0.0;\\n    else \\\{\\n        t2 *= t2;\\n        n2 =\nt2 *\n t2 * dot(float4(grad4\\\[gi2]\\\[0],grad4\\\[gi2]\\\[2],grad4\\\[gi2]\\\[3],grad4\\\[gi2]\\\[3]), float4(x2, y2, z2, w2));\\n    \\\}\\n    float t3 = 0.6 - x3*x3 - y3*y3 - z3*z3 - w3*w3;\\n    if(t3<0) n3 = 0.0;\\n    else \\\{\\n        t3 *= t3;\\n        n3 = t3 * t3 * dot(float4(grad4\\\[gi3]\\\[0],grad4\\\[gi3]\\\[2],grad4\\\[gi3]\\\[3],grad4\\\[gi3]\\\[3]), float4(x3, y3, z3, w3));\\n    \\\}\\n    float t4 = 0.6 - x4*x4 - y4*y4 - z4*z4 - w4*w4;\\n    if(t4<0) n4 = 0.0;\\n    else \\\{\\n        t4 *= t4;\\n        n4 = t4 * t4 * dot(float4(grad4\\\[gi4]\\\[0],grad4\\\[gi4]\\\[2],grad4\\\[gi4]\\\[3],grad4\\\[gi4]\\\[3]), float4(x4, y4, z4, w4));\\n    \\\}\\n    return 27.0 * (n0 + n1 + n2 + n3 + n4);\\n\\\}\\ninline float octave_noise_4d( const float octaves, const float persistence, const float scale, const float x, const float y, const float z, const float w, const float lacunarity=2 ) \\n\\\{\\n    float total = 0;\\n    float frequency = scale;\\n    float amplitude = 1;\\n    float maxAmplitude = 0;\\n    for( int i=0; i < octaves; i++ ) \\\{\\n        total += (float)raw_noise_4d( x * frequency, y * frequency, z * frequency, w * frequency ) * amplitude;\\n\\n        frequency *= lacunarity;\\n        maxAmplitude += amplitude;\\n        amplitude *= persistence;\\n    \\\}\\n    return float(total / maxAmplitude);\\n\\\}\\n\\n\\n\\nkernel noise4DKernel : ImageComputationKernel<ePixelWise>\\n\\\{\\n  Image<eRead, eAccessPoint, eEdgeClamped> p;\\n  Image<eWrite> dst;\\n\\n  param:\\n    float3 picked; //Center, or white for ramps\\n    float3 pickedB; //Black for ramps\\n    float4x4 m_r; //Camera or axis matrix.\\n    float4x4 m_g; //Camera or axis matrix.\\n    float4x4 m_b; //Camera or axis matrix.\\n    float4x4 m_a; //Camera or axis matrix.\\n\\n\\n    // Noise parameters\\n    float noise_octaves_r;\\n    float noise_octaves_g;\\n    float noise_octaves_b;\\n    float noise_octaves_a;\\n    float noise_persistence_r;\\n    float noise_persistence_g;\\n    float noise_persistence_b;\\n    float noise_persistence_a;\\n    float noise_lacunarity_r;\\n    float noise_lacunarity_g;\\n    float noise_lacunarity_b;\\n    float noise_lacunarity_a;\\n    float noise_offset_r;\\n    float noise_offset_g;\\n    float noise_offset_b;\\n    float noise_offset_a;\\n    float noise_add_r;\\n    float noise_add_g;\\n    float noise_add_b;\\n    float noise_add_a;\\n    float noise_gain_r;\\n    float noise_gain_g;\\n    float noise_gain_b;\\n    float noise_gain_a;\\n    float noise_gamma_r;\\n    float noise_gamma_g;\\n    float noise_gamma_b;\\n    float noise_gamma_a;\\n    float noise_scale_r;\\n    float noise_scale_g;\\n    float noise_scale_b;\\n    float noise_scale_a;\\n\\n\\n\\n\\n\\n  void define() \\\{\\n    defineParam(noise_octaves_r, \\\"noise octaves r\\\", 0.5f);\\n    defineParam(noise_octaves_g, \\\"noise octaves g\\\", 1.0f);\\n    defineParam(noise_octaves_b, \\\"noise octaves b\\\", 2.0f);\\n    defineParam(noise_octaves_a, \\\"noise octaves a\\\", 2.0f);\\n    defineParam(noise_persistence_r, \\\"noise persistence r\\\",  0.25f);\\n    defineParam(noise_persistence_g, \\\"noise persistence g\\\",  0.5f);\\n    defineParam(noise_persistence_b, \\\"noise persistence b\\\",  0.75f);\\n    defineParam(noise_persistence_a, \\\"noise persistence a\\\",  0.75f);\\n    defineParam(noise_lacunarity_r, \\\"lacunarity r\\\",  1.5f);\\n    defineParam(noise_lacunarity_g, \\\"lacunarity g\\\",  2.0f);\\n    defineParam(noise_lacunarity_b, \\\"lacunarity b\\\",  2.5f);\\n    defineParam(noise_lacunarity_a, \\\"lacunarity a\\\",  2.5f);\\n    defineParam(noise_scale_r, \\\"noise scale r\\\", 50.f);\\n    defineParam(noise_scale_g, \\\"noise scale g\\\", 60.01f);\\n    defineParam(noise_scale_b, \\\"noise scale b\\\", 70.01f);\\n    defineParam(noise_scale_a, \\\"noise scale a\\\", 70.01f);\\n\\n  \\\}\\n\\n\\n  inline float rad(float deg)\\\{ \\n    return deg*PI/180;\\n  \\\}\\n\\n  inline float smoothstep(float edge0, float edge1, float x)\\\{\\n    x = clamp((x - edge0)/(edge1 - edge0), 0.0f, 1.0f);\\\nn    \nreturn x*x*x*(x*(x*6-15)+10);\\n  \\\}\\n\\n  inline float cl(float val)\\\{\\n  return clamp(val,0.0f,1.0f); \\n  \\\}\\n\\n\\n  void process() \\\{\\n    //1. P WORLD\\n    // Center the coordinates\\n    float3 color_r = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z);\\n    float3 color_g = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z);\\n    float3 color_b = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z);   \\n    float3 color_a = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z); \\n    int black = 0;\\n    \\n    // Matrix!\\n    float4x4 mr = m_r;\\n    mr = mr.invert();\\n    for(int c = 0; c<dst.kComps; c++)\\\{\\n      color_r\\\[c] = mr\\\[c]\\\[0]*color_r\\\[0] + mr\\\[c]\\\[1]*color_r\\\[1] + mr\\\[c]\\\[2]*color_r\\\[2] + mr\\\[c]\\\[3]*1.0f;\\n    \\\}\\n\\n    \\n    float4x4 mg = m_g;\\n    mg = mg.invert();\\n    for(int c = 0; c<dst.kComps; c++)\\\{\\n      color_g\\\[c] = mg\\\[c]\\\[0]*color_g\\\[0] + mg\\\[c]\\\[1]*color_g\\\[1] + mg\\\[c]\\\[2]*color_g\\\[2] + mg\\\[c]\\\[3]*1.0f;\\n    \\\}\\n\\n\\n    float4x4 mb = m_b;\\n    mg = mg.invert();\\n    for(int c = 0; c<dst.kComps; c++)\\\{\\n      color_b\\\[c] = mb\\\[c]\\\[0]*color_b\\\[0] + mb\\\[c]\\\[1]*color_b\\\[1] + mb\\\[c]\\\[2]*color_b\\\[2] + mb\\\[c]\\\[3]*1.0f;\\n    \\\}\\n\\n\\n    float4x4 ma = m_a;\\n    mg = mg.invert();\\n    for(int c = 0; c<dst.kComps; c++)\\\{\\n      color_a\\\[c] = ma\\\[c]\\\[0]*color_a\\\[0] + ma\\\[c]\\\[1]*color_a\\\[1] + ma\\\[c]\\\[2]*color_a\\\[2] + ma\\\[c]\\\[3]*1.0f;\\n    \\\}\\n\\n\\n    //2. SHAPES\\n    float dist;\\n\\n\\n    // 1. Genera el ruido para cada canal por separado\\n    float noise_r = (float)octave_noise_4d(float(noise_octaves_r),noise_persistence_r,noise_scale_r==0?10000.0f:1/noise_scale_r,color_r\\\[0],color_r\\\[1],color_r\\\[2],noise_offset_r,noise_lacunarity_r);\\n    float noise_g = (float)octave_noise_4d(float(noise_octaves_g),noise_persistence_g,noise_scale_g==0?10000.0f:1/noise_scale_g,color_g\\\[0],color_g\\\[1],color_g\\\[2],noise_offset_g,noise_lacunarity_g);\\n    float noise_b = (float)octave_noise_4d(float(noise_octaves_b),noise_persistence_b,noise_scale_b==0?10000.0f:1/noise_scale_b,color_b\\\[0],color_b\\\[1],color_b\\\[2],noise_offset_b,noise_lacunarity_b);\\n    float noise_a = (float)octave_noise_4d(float(noise_octaves_a),noise_persistence_a,noise_scale_a==0?10000.0f:1/noise_scale_a,color_a\\\[0],color_a\\\[1],color_a\\\[2],noise_offset_a,noise_lacunarity_a);\\n\\n    // 2. Aplica las operaciones de adición, ganancia y gamma en cada canal\\n    noise_r = cl(pow(max((noise_r+noise_add_r)*noise_gain_r,0.0f),noise_gamma_r==0?1:1/noise_gamma_r));\\n    noise_g = cl(pow(max((noise_g+noise_add_g)*noise_gain_g,0.0f),noise_gamma_g==0?1:1/noise_gamma_g));\\n    noise_b = cl(pow(max((noise_b+noise_add_b)*noise_gain_b,0.0f),noise_gamma_b==0?1:1/noise_gamma_b));\\n    noise_a = cl(pow(max((noise_a+noise_add_a)*noise_gain_a,0.0f),noise_gamma_a==0?1:1/noise_gamma_a));\\n\\n\\n\\n    // 3. Combina los canales en un solo píxel de salida\\n    float4 result = float4(noise_r, noise_g, noise_b, noise_a);\\n    // float4 resultExtra = float4(noiseExtra_r, noiseExtra_g, noiseExtra_b, noiseExtra_a);\\n\\n    // 4. Asigna el resultado a los canales de salida RGB\\n    dst() = result;\\n\\n  \\\}\\n\\\};\"\n  useGPUIfAvailable true\n  rebuild \"\"\n  noise4DKernel_picked \{\{(parent.shape==3&&parent.mirrored)?picker-(black_point-picker):(parent.shape==5&&parent.mirrored)?picker-radius:picker\} \{(parent.shape==3&&parent.mirrored)?picker-(black_point-picker):(parent.shape==5&&parent.mirrored)?picker-radius:picker\} \{(parent.shape==3&&parent.mirrored)?picker-(black_point-picker):(parent.shape==5&&parent.mirrored)?picker-radius:picker\}\}\n  noise4DKernel_pickedB \{\{parent.shape==5?parent.axis==0?picker+radius+0.0001:picker:black_point\} \{parent.shape==5?parent.axis==1?picker+radius+0.0001:picker:black_point\} \{parent.shape==5?parent.axis==2?picker+radius+0.0001:picker+0.00001:black_point\}\}\n  noise4DKernel_m_r \{\n      \{\{parent.Axis_r.world_matrix\} \{parent.\nAxis_r.\nworld_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\}\}\n      \{\{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\}\}\n      \{\{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\}\}\n      \{\{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\} \{parent.Axis_r.world_matrix\}\}\n    \}\n  noise4DKernel_m_g \{\n      \{\{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\}\}\n      \{\{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\}\}\n      \{\{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\}\}\n      \{\{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\} \{parent.Axis_g.world_matrix\}\}\n    \}\n  noise4DKernel_m_b \{\n      \{\{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\}\}\n      \{\{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\}\}\n      \{\{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\}\}\n      \{\{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\} \{parent.Axis_b.world_matrix\}\}\n    \}\n  noise4DKernel_m_a \{\n      \{\{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\}\}\n      \{\{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\}\}\n      \{\{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\}\}\n      \{\{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\} \{parent.Axis_a.world_matrix\}\}\n    \}\n  \"noise4DKernel_noise octaves r\" \{\{parent.lumOctaves\}\}\n  \"noise4DKernel_noise octaves g\" \{\{parent.contOctaves\}\}\n  \"noise4DKernel_noise octaves b\" \{\{parent.satOctaves\}\}\n  \"noise4DKernel_noise octaves a\" \{\{parent.maskOctaves\}\}\n  \"noise4DKernel_noise persistence r\" \{\{parent.lumPersistence\}\}\n  \"noise4DKernel_noise persistence g\" \{\{parent.contPersistence\}\}\n  \"noise4DKernel_noise persistence b\" \{\{parent.satPersistence\}\}\n  \"noise4DKernel_noise persistence a\" \{\{parent.maskPersistence\}\}\n  \"noise4DKernel_lacunarity r\" \{\{parent.lumLacunarity\}\}\n  \"noise4DKernel_lacunarity g\" \{\{parent.conLacunarity\}\}\n  \"noise4DKernel_lacunarity b\" \{\{parent.satLacunarity\}\}\n  \"noise4DKernel_lacunarity a\" \{\{parent.maskLacunarity\}\}\n  noise4DKernel_noise_offset_r \{\{parent.lumOffset\}\}\n  noise4DKernel_noise_offset_g \{\{parent.contOffset\}\}\n  noise4DKernel_noise_offset_b \{\{parent.satOffset\}\}\n  noise4DKernel_noise_offset_a \{\{parent.maskOffset\}\}\n  noise4DKernel_noise_add_r 0.5\n  noise4DKernel_noise_add_g 0.5\n  noise4DKernel_noise_add_b 0.5\n  noise4DKernel_noise_add_a 0.75\n  noise4DKernel_noise_gain_r \{\{parent.lumGain\}\}\n  noise4DKernel_noise_gain_g \{\{parent.contGain\}\}\n  noise4DKernel_noise_gain_b \{\{parent.satGain\}\}\n  noise4DKernel_noise_gain_a \{\{parent.maskGain\}\}\n  noise4DKernel_noise_gamma_r \{\{parent.lumGamma\}\}\n  noise4DKernel_noise_gamma_g \{\{parent.contGamma\}\}\n  noise4DKernel_noise_gamma_b \{\{parent.satGamma\}\}\n  noise4DKernel_noise_gamma_a \{\{parent.maskGamma\}\}\n  \"noise4DKernel_noise scale r\" \{\{parent.menu.noiseScaleR.w\}\}\n  \"noise4DKernel_noise scale g\" \{\{parent.menu.noiseScaleG.w\}\}\n  \"noise4DKernel_noise scale b\" \{\{parent.menu.noiseScaleB.w\}\}\n  \"noise4DKernel_noise scale a\" \{\{parent.menu.noiseScaleA.w\}\}\n  rebuild_\nfinalise \n\"\"\n  name BlinkScriptPMatte\n  xpos -1111\n  ypos 1302\n  addUserKnob \{20 User\}\n  addUserKnob \{18 picker\}\n  picker \{0 0 0\}\n  addUserKnob \{6 picker_panelDropped l \"panel dropped state\" -STARTLINE +HIDDEN\}\n  addUserKnob \{6 picker_panelDropped_1 l \"panel dropped state\" -STARTLINE +HIDDEN\}\n  addUserKnob \{18 black_point l black\}\n  black_point \{0 0 0\}\n  addUserKnob \{6 black_point_panelDropped l \"panel dropped state\" -STARTLINE +HIDDEN\}\n  addUserKnob \{6 black_point_panelDropped_1 l \"panel dropped state\" -STARTLINE +HIDDEN\}\n \}\n AdjBBox \{\n  name AdjBBox2\n  xpos -1111\n  ypos 1340\n \}\n Soften \{\n  channels rgba\n  amount 1\n  size 1\n  name Soften1\n  xpos -1111\n  ypos 1366\n \}\n MotionBlur3D \{\n  inputs 2\n  Z depth.Z\n  shutteroffset centred\n  name MotionBlur3D1\n  xpos -1111\n  ypos 1449\n  disable \{\{!motionBlur\}\}\n \}\n VectorBlur \{\n  channels rgba\n  uv motion\n  grow_bbox 15\n  name VectorBlur2\n  xpos -1111\n  ypos 1475\n  disable \{\{!motionBlur\}\}\n \}\n Dot \{\n  name Dot19\n  xpos -1077\n  ypos 1965\n \}\nset N3c215ec0 \[stack 0]\n Merge2 \{\n  inputs 2\n  operation mask\n  bbox B\n  name Merge10\n  xpos -1436\n  ypos 1961\n \}\n Constant \{\n  inputs 0\n  channels rgb\n  name export\n  xpos -1780\n  ypos -52\n \}\n Dot \{\n  name Dot25\n  xpos -1746\n  ypos 120\n \}\nset N3b041500 \[stack 0]\npush \$N3a064d10\npush \$N3b041500\n Dot \{\n  name Dot26\n  xpos -1541\n  ypos 120\n \}\nadd_layer \{noiseExtra noiseExtra.red noiseExtra.green noiseExtra.blue noiseExtra.alpha\}\n Copy \{\n  inputs 2\n  from0 rgba.alpha\n  to0 rgba.alpha\n  from1 rgba.alpha\n  to1 noiseExtra.alpha\n  name Copy4\n  xpos -1575\n  ypos 162\n \}\n Switch \{\n  inputs 2\n  which \{\{!inputNoise\}\}\n  name Switch4\n  xpos -1780\n  ypos 174\n \}\n Copy \{\n  inputs 2\n  from0 rgba.red\n  to0 rgba.red\n  from1 rgba.green\n  to1 rgba.green\n  from2 rgba.blue\n  to2 rgba.blue\n  from3 rgba.alpha\n  to3 rgba.alpha\n  name Copy2\n  xpos -1780\n  ypos 1937\n \}\n Copy \{\n  inputs 2\n  from0 rgba.red\n  to0 noiseExtra.red\n  from1 rgba.green\n  to1 noiseExtra.green\n  from2 rgba.blue\n  to2 noiseExtra.blue\n  from3 rgba.alpha\n  to3 noiseExtra.alpha\n  name Copy3\n  xpos -1780\n  ypos 2011\n \}\n Dot \{\n  name Dot20\n  xpos -1746\n  ypos 5354\n \}\n Dot \{\n  inputs 0\n  name connectInput2\n  xpos -2195\n  ypos 2328\n \}\nset N38a8a050 \[stack 0]\n Shuffle \{\n  in noiseExtra\n  name Shuffle1\n  label \"\\\[knob in1]\"\n  xpos -1349\n  ypos 2318\n \}\npush \$Nd99997d0\n Switch \{\n  inputs 2\n  which \{\{parent.inputNoise\}\}\n  name Switch3\n  xpos -1232\n  ypos 2324\n \}\n Dot \{\n  name Dot10\n  xpos -1198\n  ypos 3017\n \}\nset N3c355560 \[stack 0]\n Dot \{\n  name Dot32\n  xpos -1198\n  ypos 3717\n \}\nset N51589b50 \[stack 0]\n Dot \{\n  name Dot4\n  xpos -1198\n  ypos 3798\n \}\nset N3c19df90 \[stack 0]\n Dot \{\n  name Dot6\n  xpos -1198\n  ypos 4559\n \}\nset N38a8d4e0 \[stack 0]\n Expression \{\n  expr0 a\n  expr1 0\n  expr2 0\n  expr3 a\n  name Expression4\n  xpos -1232\n  ypos 4623\n \}\n Dot \{\n  name Dot35\n  xpos -1198\n  ypos 4686\n \}\npush \$N38a8a050\n Dot \{\n  name Dot22\n  xpos -2195\n  ypos 2443\n \}\npush \$N3c215ec0\n Switch \{\n  inputs 2\n  which \{\{parent.inputNoise\}\}\n  name Switch2\n  xpos -1111\n  ypos 2439\n \}\n Dot \{\n  name Dot3\n  xpos -1077\n  ypos 2919\n \}\nset N3dc414a0 \[stack 0]\n Dot \{\n  name Dot5\n  xpos -1077\n  ypos 3657\n \}\nset N3c5afa00 \[stack 0]\n Dot \{\n  name Dot7\n  xpos -1077\n  ypos 4460\n \}\nset N3eeced20 \[stack 0]\n Expression \{\n  expr0 0\n  expr1 0\n  expr2 a\n  expr3 a\n  name Expression5\n  xpos -1110\n  ypos 4626\n \}\n Merge2 \{\n  inputs 2\n  operation screen\n  name Merge12\n  xpos -1110\n  ypos 4682\n \}\npush \$N38a8d4e0\n Dot \{\n  name Dot33\n  xpos -829\n  ypos 4558\n \}\nset N2fecc620 \[stack 0]\n Expression \{\n  expr3 a\n  name noiseMask4\n  xpos -863\n  ypos 4594\n \}\npush \$N2fecc620\n Expression \{\n  expr0 0\n  expr1 0\n  expr3 b\n  name blue2\n  xpos -764\n  ypos 4554\n \}\n Merge2 \{\n  inputs 2\n\n operation \nmask\n  bbox B\n  mix \{\{parent.alphaMaskMix\}\}\n  name Merge11\n  xpos -764\n  ypos 4594\n \}\nset N518c8130 \[stack 0]\n Expression \{\n  expr0 b\n  expr1 0\n  expr2 0\n  expr3 b\n  name Expression3\n  xpos -764\n  ypos 4644\n \}\n Dot \{\n  name Dot18\n  xpos -730\n  ypos 4679\n \}\npush \$N3eeced20\n Dot \{\n  name Dot34\n  xpos -762\n  ypos 4461\n \}\nset N49775c50 \[stack 0]\n Expression \{\n  expr3 a\n  name noiseMask5\n  xpos -796\n  ypos 4498\n \}\npush \$N49775c50\n Expression \{\n  expr0 0\n  expr1 0\n  expr3 b\n  name blue\n  xpos -660\n  ypos 4457\n \}\n Merge2 \{\n  inputs 2\n  operation mask\n  bbox B\n  mix \{\{parent.alphaMaskMix\}\}\n  name Merge9\n  xpos -660\n  ypos 4498\n \}\nset Nfcc70240 \[stack 0]\n Merge2 \{\n  inputs 2\n  operation screen\n  name Merge3\n  xpos -660\n  ypos 4675\n \}\npush \$N51589b50\n Expression \{\n  expr3 a\n  name noiseMask2\n  xpos -868\n  ypos 3713\n \}\npush \$N3c5afa00\n Dot \{\n  name Dot31\n  xpos -896\n  ypos 3657\n \}\nset N3e8937a0 \[stack 0]\n Expression \{\n  expr0 0\n  expr2 0\n  expr3 g\n  name green\n  xpos -753\n  ypos 3653\n \}\n Merge2 \{\n  inputs 2\n  operation mask\n  bbox B\n  mix \{\{parent.alphaMaskMix\}\}\n  name Merge6\n  xpos -753\n  ypos 3713\n \}\nset N4d12ee70 \[stack 0]\n Expression \{\n  expr0 0\n  expr1 0\n  expr2 g\n  expr3 g\n  name Expression2\n  xpos -753\n  ypos 3739\n \}\n Dot \{\n  name Dot17\n  xpos -719\n  ypos 3906\n \}\npush \$N3e8937a0\n Expression \{\n  expr3 a\n  name noiseMask3\n  xpos -930\n  ypos 3844\n \}\npush \$N3c19df90\n Expression \{\n  expr0 0\n  expr2 0\n  expr3 g\n  name green2\n  xpos -670\n  ypos 3794\n \}\n Merge2 \{\n  inputs 2\n  operation mask\n  bbox B\n  mix \{\{parent.alphaMaskMix\}\}\n  name Merge8\n  xpos -670\n  ypos 3844\n \}\nset N656c8810 \[stack 0]\n Merge2 \{\n  inputs 2\n  operation screen\n  name Merge2\n  xpos -670\n  ypos 3902\n \}\npush \$N3c355560\n Dot \{\n  name Dot29\n  xpos -862\n  ypos 3017\n \}\nset N3bff7500 \[stack 0]\n Expression \{\n  expr3 a\n  name noiseMask\n  xpos -896\n  ypos 3052\n \}\npush \$N3bff7500\n Expression \{\n  expr1 0\n  expr2 0\n  expr3 r\n  name red2\n  xpos -760\n  ypos 3013\n \}\nset N3c5a5bc0 \[stack 0]\n Merge2 \{\n  inputs 2\n  operation mask\n  bbox B\n  mix \{\{parent.alphaMaskMix\}\}\n  name Merge13\n  xpos -760\n  ypos 3052\n \}\n Expression \{\n  expr0 0\n  expr1 r\n  expr2 0\n  expr3 r\n  name Expression1\n  xpos -760\n  ypos 3078\n \}\n Dot \{\n  name Dot16\n  xpos -726\n  ypos 3136\n \}\npush \$N3dc414a0\n Dot \{\n  name Dot30\n  xpos -772\n  ypos 2919\n \}\nset N505679a0 \[stack 0]\n Expression \{\n  expr3 a\n  name noiseMask1\n  xpos -806\n  ypos 2955\n \}\npush \$N505679a0\n Expression \{\n  expr1 0\n  expr2 0\n  expr3 r\n  name red\n  xpos -670\n  ypos 2915\n \}\n Merge2 \{\n  inputs 2\n  operation mask\n  bbox B\n  mix \{\{parent.alphaMaskMix\}\}\n  name Merge7\n  xpos -670\n  ypos 2955\n \}\nset N4961cf80 \[stack 0]\n Merge2 \{\n  inputs 2\n  operation screen\n  name Merge1\n  xpos -670\n  ypos 3132\n \}\n Input \{\n  inputs 0\n  name mask\n  xpos -558\n  ypos 4818\n  number 2\n \}\npush \$N3ce54480\npush \$N518c8130\npush \$Nfcc70240\npush \$N656c8810\npush \$N4d12ee70\npush \$N3c5a5bc0\npush \$N4961cf80\npush \$N3d94fec0\n Grade \{\n  inputs 1+1\n  white \{0.7541666627 0.7866666317 0.739166677 0.6100000143\}\n  multiply \{\{parent.lumMultiply\} \{parent.lumMultiply\} \{parent.lumMultiply\} \{parent.lumMultiply\}\}\n  gamma \{0.8799999356 0.9 0.8799999356 1\}\n  black_clamp false\n  unpremult -rgba.alpha\n  mix \{\{parent.luminanceMix\}\}\n  name Gradedirt1\n  xpos -252\n  ypos 2955\n  disable \{\{1-parent.DirtOn x1001 1 x1037 1\}\}\n \}\n Grade \{\n  inputs 1+1\n  white \{0.6119999886 0.65 0.6364102364 1\}\n  multiply \{\{parent.lumMultiply\} \{parent.lumMultiply\} \{parent.lumMultiply\} \{parent.lumMultiply\}\}\n  black_clamp false\n  unpremult -rgba.alpha\n  mix \{\{parent.luminanceMix\}\}\n  name GradedirtStain1\n  xpos -252\n  ypos 3013\n  disable \{\{1-parent.DirtOn x1001 1\}\}\n \}\n ColorCorrect \{\n  inputs 1+1\n  \ncontrast 1.24\n  \nmidtones.saturation 0.5\n  midtones.contrast 1.34\n  midtones.gain 1.44\n  highlights.contrast 1.07\n  highlights.gain 1.86\n  lookup \{shadow \{curve 1 s0 x0.05491140112 0 s0\}\n    midtone \{1-shadow-highlight\}\n    highlight \{curve x0.3050633073 0 s0 x0.6101266146 1 s0\}\}\n  unpremult -rgba.alpha\n  mix \{\{parent.contrastMix\}\}\n  name ColorCorrectContrast1\n  xpos -246\n  ypos 3713\n  disable \{\{1-parent.ContrastOn\}\}\n \}\n ColorCorrect \{\n  inputs 1+1\n  contrast 1.06\n  shadows.gamma 1.3\n  midtones.contrast 0.92\n  midtones.gamma 0.92\n  midtones.gain 2\n  highlights.gamma 0.88\n  highlights.gain 1.33\n  lookup \{shadow \{curve 1 s0 x0.0514652133 0 s0\}\n    midtone \{1-shadow-highlight\}\n    highlight \{curve x0.2859178185 0 s0 x0.5718356371 1 s0\}\}\n  unpremult -rgba.alpha\n  mix \{\{parent.contrastMix\}\}\n  name ColorCorrectHigh1\n  xpos -246\n  ypos 3844\n  disable \{\{1-parent.ContrastOn\}\}\n \}\n HueShift \{\n  inputs 1+1\n  channels rgba\n  color_saturation 0.52\n  hue_rotation 5\n  unpremult -rgba.alpha\n  mix \{\{parent.colorMix\}\}\n  name HueShift_greener1\n  xpos -246\n  ypos 4498\n  disable \{\{1-parent.HueOn x1001 1\}\}\n \}\n HueShift \{\n  inputs 1+1\n  hue_rotation -5\n  unpremult -rgba.alpha\n  mix \{\{parent.colorMix\}\}\n  name HueShift1\n  xpos -246\n  ypos 4594\n  disable \{\{1-parent.HueOn\}\}\n \}\n Copy \{\n  inputs 2\n  from0 rgba.alpha\n  to0 rgba.alpha\n  name Copy1\n  xpos -246\n  ypos 4634\n  disable \{\{parent.img.existInput\}\}\n \}\n Premult \{\n  name Premult1\n  xpos -246\n  ypos 4672\n \}\npush \$N3bcc4380\n Merge2 \{\n  inputs 2+1\n  operation copy\n  name Merge5\n  xpos -246\n  ypos 4818\n \}\n Switch \{\n  inputs 6\n  which \{\{parent.output\}\}\n  name Switch1\n  xpos -246\n  ypos 5350\n \}\n Merge2 \{\n  inputs 2\n  operation mask\n  name Merge4\n  xpos -246\n  ypos 5848\n  disable \{\{Switch1.which==0?1:0\}\}\n \}\n Dot \{\n  name Dot44\n  xpos -212\n  ypos 6055\n \}\nset N30d677d0 \[stack 0]\npush \$N55fa7e80\n Dot \{\n  name Dot39\n  xpos 790\n  ypos -390\n \}\n Dot \{\n  name Dot15\n  xpos 790\n  ypos 6055\n \}\n DeepRecolor \{\n  inputs 2\n  name DeepRecolor1\n  xpos -124\n  ypos 6051\n \}\n Dot \{\n  name Dot43\n  xpos -90\n  ypos 6159\n \}\npush \$N30d677d0\n Switch \{\n  inputs 2\n  which \{\{inputData\}\}\n  name SwitchDeep1\n  xpos -246\n  ypos 6155\n \}\n Output \{\n  name Output1\n  xpos -246\n  ypos 7218\n \}\npush \$Nd9aa5ea0\n NoOp \{\n  name menu\n  xpos -150\n  ypos -95\n  addUserKnob \{20 User\}\n  addUserKnob \{4 output M \{Result \"Luminance noise\" \"Contrast noise\" \"Saturation noise\" \"Alpha mask noise\" Precomp \"\" \"\" \"\"\}\}\n  addUserKnob \{26 \"\"\}\n  addUserKnob \{3 units\}\n  units \{\{parent.units==0?0.01:parent.units==1?1:100\}\}\n  addUserKnob \{26 \"\"\}\n  addUserKnob \{14 noiseScaleR R 0 500\}\n  noiseScaleR \{\{50*units*sizeR.w/2\} \{50*units*sizeR.h/2\}\}\n  addUserKnob \{14 noiseScaleG R 0 500\}\n  noiseScaleG \{\{350*units*sizeG.w/2\} \{350*units*sizeG.h/2\}\}\n  addUserKnob \{14 noiseScaleB R 0 500\}\n  noiseScaleB \{\{300*units*sizeB.w/2\} \{300*units*sizeB.h/2\}\}\n  addUserKnob \{14 noiseScaleA R 0 100\}\n  noiseScaleA \{\{600*units*sizeA.w/2\} \{600*units*sizeA.h/2\}\}\n  addUserKnob \{26 \"\"\}\n  addUserKnob \{14 sizeR l size R 0 10\}\n  sizeR 2\n  addUserKnob \{14 sizeG l size R 0 10\}\n  sizeG 2\n  addUserKnob \{14 sizeB l size R 0 10\}\n  sizeB 2\n  addUserKnob \{14 sizeA l size R 0 10\}\n  sizeA 2\n \}\nend_group\n" -STARTLINE M {mm cm m "" "" "" ""}}
 units cm
 addUserKnob {26 text l "" -STARTLINE T "     "}
 addUserKnob {6 motionBlur l "motion blur" t "Activate this checkbox to add 3D motion blur. You must to conect your camera. " -STARTLINE}
 addUserKnob {26 text_5 l "" -STARTLINE T "     "}
 addUserKnob {6 inputNoise l "input noise" t "It allows you to pre-render the noise pattern and conect it, to acelerate the process.\nTo achieve this, first set the output in the precomposition, render all the image channels, then activate the checkbox, and finally connect the image to the noise input." -STARTLINE}
 addUserKnob {26 ""}
 addUserKnob {20 motionblur l "motion blur" n 1}
 motionblur 0
 addUserKnob {41 constant l add T VectorBlur2.constant}
 addUserKnob {41 scale l multiply T VectorBlur2.scale}
 addUserKnob {41 method T VectorBlur2.method}
 addUserKnob {26 ""}
 addUserKnob {41 distance T MotionBlur3D1.distance}
 addUserKnob {41 shutter T MotionBlur3D1.shutter}
 addUserKnob {41 shutteroffset l "shutter offset" T MotionBlur3D1.shutteroffset}
 addUserKnob {41 shuttercustomoffset l "" -STARTLINE T MotionBlur3D1.shuttercustomoffset}
 addUserKnob {20 endGroup_3 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {20 luminanceSettings l luminance n 1}
 luminanceSettings 0
 addUserKnob {41 sizeR_1 l size T menu.sizeR}
 addUserKnob {7 lumOffset l offset}
 addUserKnob {3 lumOctaves l octaves}
 lumOctaves 4
 addUserKnob {7 lumLacunarity l lacunarity}
 lumLacunarity 2.5
 addUserKnob {7 lumPersistence l persistence}
 lumPersistence 0.6
 addUserKnob {7 lumGain l gain}
 lumGain 1
 addUserKnob {7 lumGamma l gamma}
 lumGamma 0.25
 addUserKnob {26 ""}
 addUserKnob {41 uniform_scale l "uniform scale" T Axis_r.uniform_scale}
 addUserKnob {41 translate T Axis_r.translate}
 addUserKnob {41 rotate T Axis_r.rotate}
 addUserKnob {41 scaling l scale T Axis_r.scaling}
 addUserKnob {26 text_2 l "" +STARTLINE T "     "}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {20 contrastSettings l contrast n 1}
 contrastSettings 0
 addUserKnob {41 sizeG_1 l size T menu.sizeG}
 addUserKnob {7 contOffset l z R 0 5}
 addUserKnob {3 contOctaves l octaves}
 contOctaves 4
 addUserKnob {7 conLacunarity l lacunarity}
 conLacunarity 3
 addUserKnob {7 contPersistence l persistence}
 contPersistence 0.5
 addUserKnob {7 contGain l gain}
 contGain 1
 addUserKnob {7 contGamma l gamma}
 contGamma 0.3
 addUserKnob {26 ""}
 addUserKnob {41 translate_1 l translate T Axis_g.translate}
 addUserKnob {41 rotate_1 l rotate T Axis_g.rotate}
 addUserKnob {41 scaling_1 l scale T Axis_g.scaling}
 addUserKnob {41 uniform_scale_1 l "uniform scale" T Axis_g.uniform_scale}
 addUserKnob {26 text_2_2 l "" +STARTLINE T "     "}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {20 saturationSettings l saturation n 1}
 saturationSettings 0
 addUserKnob {41 sizeB_1 l size T menu.sizeB}
 addUserKnob {7 satOffset l z R 0 5}
 addUserKnob {3 satOctaves l octaves}
 satOctaves 2
 addUserKnob {7 satLacunarity l lacunarity}
 satLacunarity 3
 addUserKnob {7 satPersistence l persistence}
 satPersistence 1
 addUserKnob {7 satGain l gain}
 satGain 1
 addUserKnob {7 satGamma l gamma}
 satGamma 0.5
 addUserKnob {26 ""}
 addUserKnob {41 translate_2 l translate T Axis_b.translate}
 addUserKnob {41 rotate_2 l rotate T Axis_b.rotate}
 addUserKnob {41 scaling_2 l scale T Axis_b.scaling}
 addUserKnob {41 uniform_scale_2 l "uniform scale" T Axis_b.uniform_scale}
 addUserKnob {26 text_2_2_1 l "" +STARTLINE T "     "}
 addUserKnob {20 endGroup_2 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {20 alphaMask l "alpha mask" n 1}
 alphaMask 0
 addUserKnob {41 sizeA_1 l size T menu.sizeA}
 addUserKnob {3 maskOffset l z}
 addUserKnob {7 maskOctaves l octaves}
 maskOctaves 2
 addUserKnob {7 maskLacunarity l lacunarity}
 maskLacunarity 3
 addUserKnob {7 maskPersistence l persistence}
 maskPersistence 0.6
 addUserKnob {7 maskGain l gain}
 maskGain 0.85
 addUserKnob {7 maskGamma l gamma}
 maskGamma 0.85
 addUserKnob {26 ""}
 addUserKnob {41 translate_3 l translate T Axis_a.translate}
 addUserKnob {41 rotate_3 l rotate T Axis_a.rotate}
 addUserKnob {41 scaling_3 l scale T Axis_a.scaling}
 addUserKnob {41 uniform_scale_3 l "uniform scale" T Axis_a.uniform_scale}
 addUserKnob {26 text_2_2_1_1 l "" +STARTLINE T "     "}
 addUserKnob {20 endGroup_4 l endGroup n -1}
 addUserKnob {20 About}
 addUserKnob {26 text_1_1 l "" +STARTLINE T "   "}
 addUserKnob {26 text_2_1 l "" +STARTLINE T "   "}
 addUserKnob {26 text_4 l "" +STARTLINE T "<font color=#ffffff><font size=\"7\">aeDirtCG</font><font size=\"4\"> v1.2</font>\n"}
 addUserKnob {26 about_1_1 l "" +STARTLINE T "by Aitor Echeveste © 2023"}
 addUserKnob {26 text_1_1_1 l "" +STARTLINE T "   "}
 addUserKnob {26 ""}
 addUserKnob {26 text_3 l "" +STARTLINE T "   "}
 addUserKnob {26 website l "" +STARTLINE T "<b><a href=\"http://www.aitorecheveste.com\"><span style=\"color:#C8C8C8;\">www.aitorecheveste.com</span></a><b>"}
}
 Input {
  inputs 0
  name img
  xpos -252
  ypos -2013
  addUserKnob {20 User}
  addUserKnob {6 existInput +STARTLINE}
  existInput {{"!\[exists input0]"}}
 }
 Dot {
  name Dot40
  xpos -218
  ypos -1190
 }
set Nc8971400 [stack 0]
 Dot {
  name Dot41
  xpos -327
  ypos -1190
 }
 DeepToImage {
  name DeepToImage12
  xpos -361
  ypos -1058
 }
set Nc8972e00 [stack 0]
 Dot {
  name Dot42
  xpos -327
  ypos -975
 }
push $Nc8971400
 Switch {
  inputs 2
  which {{inputData}}
  name SwitchDeep
  xpos -252
  ypos -979
 }
 Dot {
  name connectInput
  xpos -218
  ypos -485
 }
set Nc8973c00 [stack 0]
 Dot {
  name Dot11
  xpos -218
  ypos -222
 }
set Nc8974000 [stack 0]
 Dot {
  name Dot12
  xpos -67
  ypos -222
 }
 Dot {
  name Dot45
  xpos -67
  ypos 3618
 }
set Nc8974800 [stack 0]
 Dot {
  name Dot8
  xpos -67
  ypos 4641
 }
set Nc8974c00 [stack 0]
 Dot {
  name Dot14
  xpos -67
  ypos 4822
 }
set Nc8975000 [stack 0]
 Dot {
  name Dot2
  xpos -67
  ypos 6252
 }
push $Nc8974000
 Dot {
  name Dot27
  xpos -1402
  ypos -222
 }
set Nc8975800 [stack 0]
 Dot {
  name Dot28
  xpos -1402
  ypos 1898
 }
set Nc8975c00 [stack 0]
 Dot {
  name Dot36
  xpos -1492
  ypos 1898
 }
 Input {
  inputs 0
  name cam
  xpos -771
  ypos -2014
  number 1
 }
 Dot {
  name Dot38
  xpos -737
  ypos 182
 }
set Nc8976800 [stack 0]
 Dot {
  name Dot24
  xpos -737
  ypos 1423
 }
set Nc8976c00 [stack 0]
push $Nc8976800
push $Nc8972e00
 Dot {
  name Dot37
  xpos -1077
  ypos -1054
 }
 Expression {
  channel0 depth
  expr0 z==0?0:1/z
  name Expression6
  label "NORMALIZED DEPTH"
  xpos -1111
  ypos 44
  disable {{!parent.z}}
 }
 Shuffle {
  in depth
  name Shuffle10
  label "\[knob in1]"
  xpos -1111
  ypos 76
 }
 DepthToPosition {
  inputs 2
  output P
  name DepthToPosition1
  xpos -1111
  ypos 172
 }
 Shuffle {
  in P
  name Shuffle2
  label "\[knob in1]"
  xpos -1111
  ypos 204
 }
push $Nc8974000
 Unpremult {
  name Unpremult1
  xpos -252
  ypos -54
  disable {{!parent.premultiplied}}
 }
 Dot {
  name Dot1
  xpos -218
  ypos 314
 }
set Nc897c800 [stack 0]
 Shuffle {
  in P
  in2 rgba
  alpha alpha2
  name ShuffleInImg
  xpos -975
  ypos 310
 }
 Switch {
  inputs 2
  which {{inputData}}
  name SwitchDeep2
  xpos -1111
  ypos 310
 }
 Dot {
  name Dot13
  xpos -1077
  ypos 1067
 }
set Nc897f600 [stack 0]
 Dot {
  name Dot9
  xpos -1198
  ypos 1068
 }
 BlinkScript {
  recompileCount 49
  ProgramGroup 1
  KernelDescription "2 \"noise4DKernel\" iterate pixelWise a05d21619d7aff6c29dc58c43f1db443ae69e67492bb5e8bb2a3812029973d9b 2 \"p\" Read Point \"dst\" Write Point 38 \"picked\" Float 3 AAAAAAAAAAAAAAAAAAAAAA== \"pickedB\" Float 3 AAAAAAAAAAAAAAAAAAAAAA== \"m_r\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"m_g\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"m_b\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"m_a\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"noise octaves r\" Float 1 AAAAPw== \"noise octaves g\" Float 1 AACAPw== \"noise octaves b\" Float 1 AAAAQA== \"noise octaves a\" Float 1 AAAAQA== \"noise persistence r\" Float 1 AACAPg== \"noise persistence g\" Float 1 AAAAPw== \"noise persistence b\" Float 1 AABAPw== \"noise persistence a\" Float 1 AABAPw== \"lacunarity r\" Float 1 AADAPw== \"lacunarity g\" Float 1 AAAAQA== \"lacunarity b\" Float 1 AAAgQA== \"lacunarity a\" Float 1 AAAgQA== \"noise_offset_r\" Float 1 AAAAAA== \"noise_offset_g\" Float 1 AAAAAA== \"noise_offset_b\" Float 1 AAAAAA== \"noise_offset_a\" Float 1 AAAAAA== \"noise_add_r\" Float 1 AAAAAA== \"noise_add_g\" Float 1 AAAAAA== \"noise_add_b\" Float 1 AAAAAA== \"noise_add_a\" Float 1 AAAAAA== \"noise_gain_r\" Float 1 AAAAAA== \"noise_gain_g\" Float 1 AAAAAA== \"noise_gain_b\" Float 1 AAAAAA== \"noise_gain_a\" Float 1 AAAAAA== \"noise_gamma_r\" Float 1 AAAAAA== \"noise_gamma_g\" Float 1 AAAAAA== \"noise_gamma_b\" Float 1 AAAAAA== \"noise_gamma_a\" Float 1 AAAAAA== \"noise scale r\" Float 1 AABIQg== \"noise scale g\" Float 1 PQpwQg== \"noise scale b\" Float 1 HwWMQg== \"noise scale a\" Float 1 HwWMQg== 38 \"picked\" 3 1 \"pickedB\" 3 1 \"m_r\" 16 1 \"m_g\" 16 1 \"m_b\" 16 1 \"m_a\" 16 1 \"noise_octaves_r\" 1 1 \"noise_octaves_g\" 1 1 \"noise_octaves_b\" 1 1 \"noise_octaves_a\" 1 1 \"noise_persistence_r\" 1 1 \"noise_persistence_g\" 1 1 \"noise_persistence_b\" 1 1 \"noise_persistence_a\" 1 1 \"noise_lacunarity_r\" 1 1 \"noise_lacunarity_g\" 1 1 \"noise_lacunarity_b\" 1 1 \"noise_lacunarity_a\" 1 1 \"noise_offset_r\" 1 1 \"noise_offset_g\" 1 1 \"noise_offset_b\" 1 1 \"noise_offset_a\" 1 1 \"noise_add_r\" 1 1 \"noise_add_g\" 1 1 \"noise_add_b\" 1 1 \"noise_add_a\" 1 1 \"noise_gain_r\" 1 1 \"noise_gain_g\" 1 1 \"noise_gain_b\" 1 1 \"noise_gain_a\" 1 1 \"noise_gamma_r\" 1 1 \"noise_gamma_g\" 1 1 \"noise_gamma_b\" 1 1 \"noise_gamma_a\" 1 1 \"noise_scale_r\" 1 1 \"noise_scale_g\" 1 1 \"noise_scale_b\" 1 1 \"noise_scale_a\" 1 1 0"
  kernelSource "// ----------------------------------------------------------------\n// aeDirtCG v1.0 by Aitor Echeveste 2023\n// ----------------------------------------------------------------\n// Noise algorithm adapted by Aitor Echeveste from Noise4D function by Mads Hagbarth and Adrian Pueyo\n// Noise4D function Ported by Mads Hagbarth Lund 2014\n// Based on https://github.com/Draradech/csworldgen/blob/master/simplexnoise.cpp\n\n\n\n\nint fastfloor( const float x ) \{ return x > 0 ? (int) x : (int) x - 1; \}\ninline float raw_noise_4d( const float x, const float y, const float z, const float w ) \n\{\nint simplex\[64]\[4] = \{\n    \{0,1,2,3\},\{0,1,3,2\},\{0,0,0,0\},\{0,2,3,1\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{1,2,3,0\},\n    \{0,2,1,3\},\{0,0,0,0\},\{0,3,1,2\},\{0,3,2,1\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{1,3,2,0\},\n    \{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\n    \{1,2,0,3\},\{0,0,0,0\},\{1,3,0,2\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{2,3,0,1\},\{2,3,1,0\},\n    \{1,0,2,3\},\{1,0,3,2\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{2,0,3,1\},\{0,0,0,0\},\{2,1,3,0\},\n    \{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\n    \{2,0,1,3\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{3,0,1,2\},\{3,0,2,1\},\{0,0,0,0\},\{3,1,2,0\},\n    \{2,1,0,3\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{3,1,0,2\},\{0,0,0,0\},\{3,2,0,1\},\{3,2,1,0\}\n\};\n    int perm\[512] = \{\n        151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,\n        8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,\n        35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,\n        134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,\n        55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208, 89,\n        18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,\n        250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,\n        189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,\n        172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,\n        228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,\n        107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,\n        138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,\n\n        151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,\n        8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,\n        35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,\n        134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,\n        55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208, 89,\n        18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,\n        250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,\n        189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,\n        172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,\n        228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,\n        107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,\n        138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180\n    \};\n  int grad4\[32]\[4]= \{\n    \{0,1,1,1\},  \{0,1,1,-1\},  \{0,1,-1,1\},  \{0,1,-1,-1\},\n    \{0,-1,1,1\}, \{0,-1,1,-1\}, \{0,-1,-1,1\}, \{0,-1,-1,-1\},\n    \{1,0,1,1\},  \{1,0,1,-1\},  \{1,0,-1,1\},  \{1,0,-1,-1\},\n    \{-1,0,1,1\}, \{-1,0,1,-1\}, \{-1,0,-1,1\}, \{-1,0,-1,-1\},\n    \{1,1,0,1\},  \{1,1,0,-1\},  \{1,-1,0,1\},  \{1,-1,0,-1\},\n    \{-1,1,0,1\}, \{-1,1,0,-1\}, \{-1,-1,0,1\}, \{-1,-1,0,-1\},\n    \{1,1,1,0\},  \{1,1,-1,0\},  \{1,-1,1,0\},  \{1,-1,-1,0\},\n    \{-1,1,1,0\}, \{-1,1,-1,0\}, \{-1,-1,1,0\}, \{-1,\n\n-1,-1,0\}\n  \};\n    float F4 = (sqrt(5.0f)-1.0)/4.0;\n    float G4 = (5.0-sqrt(5.0f))/20.0;\n    float n0, n1, n2, n3, n4;\n    float s = (x + y + z + w) * F4;\n    int i = fastfloor(x + s);\n    int j = fastfloor(y + s);\n    int k = fastfloor(z + s);\n    int l = fastfloor(w + s);\n    float t = (i + j + k + l) * G4;\n    float X0 = i - t;\n    float Y0 = j - t;\n    float Z0 = k - t;\n    float W0 = l - t;\n\n    float x0 = x - X0;\n    float y0 = y - Y0;\n    float z0 = z - Z0;\n    float w0 = w - W0;\n    int c1 = (x0 > y0) ? 32 : 0;\n    int c2 = (x0 > z0) ? 16 : 0;\n    int c3 = (y0 > z0) ? 8 : 0;\n    int c4 = (x0 > w0) ? 4 : 0;\n    int c5 = (y0 > w0) ? 2 : 0;\n    int c6 = (z0 > w0) ? 1 : 0;\n    int c = c1 + c2 + c3 + c4 + c5 + c6;\n\n    int i1, j1, k1, l1;\n    int i2, j2, k2, l2;\n    int i3, j3, k3, l3;\n    i1 = simplex\[c]\[0]>=3 ? 1 : 0;\n    j1 = simplex\[c]\[1]>=3 ? 1 : 0;\n    k1 = simplex\[c]\[2]>=3 ? 1 : 0;\n    l1 = simplex\[c]\[3]>=3 ? 1 : 0;\n    i2 = simplex\[c]\[0]>=2 ? 1 : 0;\n    j2 = simplex\[c]\[1]>=2 ? 1 : 0;\n    k2 = simplex\[c]\[2]>=2 ? 1 : 0;\n    l2 = simplex\[c]\[3]>=2 ? 1 : 0;\n    i3 = simplex\[c]\[0]>=1 ? 1 : 0;\n    j3 = simplex\[c]\[1]>=1 ? 1 : 0;\n    k3 = simplex\[c]\[2]>=1 ? 1 : 0;\n    l3 = simplex\[c]\[3]>=1 ? 1 : 0;\n    float x1 = x0 - i1 + G4;\n    float y1 = y0 - j1 + G4;\n    float z1 = z0 - k1 + G4;\n    float w1 = w0 - l1 + G4;\n    float x2 = x0 - i2 + 2.0*G4;\n    float y2 = y0 - j2 + 2.0*G4;\n    float z2 = z0 - k2 + 2.0*G4;\n    float w2 = w0 - l2 + 2.0*G4;\n    float x3 = x0 - i3 + 3.0*G4;\n    float y3 = y0 - j3 + 3.0*G4;\n    float z3 = z0 - k3 + 3.0*G4;\n    float w3 = w0 - l3 + 3.0*G4;\n    float x4 = x0 - 1.0 + 4.0*G4;\n    float y4 = y0 - 1.0 + 4.0*G4;\n    float z4 = z0 - 1.0 + 4.0*G4;\n    float w4 = w0 - 1.0 + 4.0*G4;\n    int ii = i & 255;\n    int jj = j & 255;\n    int kk = k & 255;\n    int ll = l & 255;\n    int gi0 = perm\[ii+perm\[jj+perm\[kk+perm\[ll]]]] % 32;\n    int gi1 = perm\[ii+i1+perm\[jj+j1+perm\[kk+k1+perm\[ll+l1]]]] % 32;\n    int gi2 = perm\[ii+i2+perm\[jj+j2+perm\[kk+k2+perm\[ll+l2]]]] % 32;\n    int gi3 = perm\[ii+i3+perm\[jj+j3+perm\[kk+k3+perm\[ll+l3]]]] % 32;\n    int gi4 = perm\[ii+1+perm\[jj+1+perm\[kk+1+perm\[ll+1]]]] % 32;\n    float t0 = 0.6 - x0*x0 - y0*y0 - z0*z0 - w0*w0;\n    if(t0<0) n0 = 0.0;\n    else \{\n        t0 *= t0;\n        n0 = t0 * t0 * dot(float4(grad4\[gi0]\[0],grad4\[gi0]\[2],grad4\[gi0]\[3],grad4\[gi0]\[3]), float4(x0, y0, z0, w0));\n    \}\n    float t1 = 0.6 - x1*x1 - y1*y1 - z1*z1 - w1*w1;\n    if(t1<0) n1 = 0.0;\n    else \{\n        t1 *= t1;\n        n1 = t1 * t1 * dot(float4(grad4\[gi1]\[0],grad4\[gi1]\[2],grad4\[gi1]\[3],grad4\[gi1]\[3]), float4(x1, y1, z1, w1));\n    \}\n    float t2 = 0.6 - x2*x2 - y2*y2 - z2*z2 - w2*w2;\n    if(t2<0) n2 = 0.0;\n    else \{\n        t2 *= t2;\n        n2 = t2 * t2 * dot(float4(grad4\[gi2]\[0],grad4\[gi2]\[2],grad4\[gi2]\[3],grad4\[gi2]\[3]), float4(x2, y2, z2, w2));\n    \}\n    float t3 = 0.6 - x3*x3 - y3*y3 - z3*z3 - w3*w3;\n    if(t3<0) n3 = 0.0;\n    else \{\n        t3 *= t3;\n        n3 = t3 * t3 * dot(float4(grad4\[gi3]\[0],grad4\[gi3]\[2],grad4\[gi3]\[3],grad4\[gi3]\[3]), float4(x3, y3, z3, w3));\n    \}\n    float t4 = 0.6 - x4*x4 - y4*y4 - z4*z4 - w4*w4;\n    if(t4<0) n4 = 0.0;\n    else \{\n        t4 *= t4;\n        n4 = t4 * t4 * dot(float4(grad4\[gi4]\[0],grad4\[gi4]\[2],grad4\[gi4]\[3],grad4\[gi4]\[3]), float4(x4, y4, z4, w4));\n    \}\n    return 27.0 * (n0 + n1 + n2 + n3 + n4);\n\}\ninline float octave_noise_4d( const float octaves, const float persistence, const float scale, const float x, const float y, const float z, const float w, const float lacunarity=2 ) \n\{\n    float total = 0;\n    float frequency = scale;\n    float amplitude = 1;\n    float maxAmplitude = 0;\n    for( int i=0; i < octaves; i++ ) \{\n        total += (float)raw_noise_4d( x * frequency, y * frequency, z * frequency, w * frequency ) * amplitude;\n\n        frequency *= lacunarity;\n        maxAmplitude += amplitude;\n        amplitude *= persistence;\n    \}\n    \n\nreturn float(total / maxAmplitude);\n\}\n\n\n\nkernel noise4DKernel : ImageComputationKernel<ePixelWise>\n\{\n  Image<eRead, eAccessPoint, eEdgeClamped> p;\n  Image<eWrite> dst;\n\n  param:\n    float3 picked; //Center, or white for ramps\n    float3 pickedB; //Black for ramps\n    float4x4 m_r; //Camera or axis matrix.\n    float4x4 m_g; //Camera or axis matrix.\n    float4x4 m_b; //Camera or axis matrix.\n    float4x4 m_a; //Camera or axis matrix.\n\n\n    // Noise parameters\n    float noise_octaves_r;\n    float noise_octaves_g;\n    float noise_octaves_b;\n    float noise_octaves_a;\n    float noise_persistence_r;\n    float noise_persistence_g;\n    float noise_persistence_b;\n    float noise_persistence_a;\n    float noise_lacunarity_r;\n    float noise_lacunarity_g;\n    float noise_lacunarity_b;\n    float noise_lacunarity_a;\n    float noise_offset_r;\n    float noise_offset_g;\n    float noise_offset_b;\n    float noise_offset_a;\n    float noise_add_r;\n    float noise_add_g;\n    float noise_add_b;\n    float noise_add_a;\n    float noise_gain_r;\n    float noise_gain_g;\n    float noise_gain_b;\n    float noise_gain_a;\n    float noise_gamma_r;\n    float noise_gamma_g;\n    float noise_gamma_b;\n    float noise_gamma_a;\n    float noise_scale_r;\n    float noise_scale_g;\n    float noise_scale_b;\n    float noise_scale_a;\n\n\n\n\n\n  void define() \{\n    defineParam(noise_octaves_r, \"noise octaves r\", 0.5f);\n    defineParam(noise_octaves_g, \"noise octaves g\", 1.0f);\n    defineParam(noise_octaves_b, \"noise octaves b\", 2.0f);\n    defineParam(noise_octaves_a, \"noise octaves a\", 2.0f);\n    defineParam(noise_persistence_r, \"noise persistence r\",  0.25f);\n    defineParam(noise_persistence_g, \"noise persistence g\",  0.5f);\n    defineParam(noise_persistence_b, \"noise persistence b\",  0.75f);\n    defineParam(noise_persistence_a, \"noise persistence a\",  0.75f);\n    defineParam(noise_lacunarity_r, \"lacunarity r\",  1.5f);\n    defineParam(noise_lacunarity_g, \"lacunarity g\",  2.0f);\n    defineParam(noise_lacunarity_b, \"lacunarity b\",  2.5f);\n    defineParam(noise_lacunarity_a, \"lacunarity a\",  2.5f);\n    defineParam(noise_scale_r, \"noise scale r\", 50.f);\n    defineParam(noise_scale_g, \"noise scale g\", 60.01f);\n    defineParam(noise_scale_b, \"noise scale b\", 70.01f);\n    defineParam(noise_scale_a, \"noise scale a\", 70.01f);\n\n  \}\n\n\n  inline float rad(float deg)\{ \n    return deg*PI/180;\n  \}\n\n  inline float smoothstep(float edge0, float edge1, float x)\{\n    x = clamp((x - edge0)/(edge1 - edge0), 0.0f, 1.0f);\n    return x*x*x*(x*(x*6-15)+10);\n  \}\n\n  inline float cl(float val)\{\n  return clamp(val,0.0f,1.0f); \n  \}\n\n\n  void process() \{\n    //1. P WORLD\n    // Center the coordinates\n    float3 color_r = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z);\n    float3 color_g = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z);\n    float3 color_b = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z);   \n    float3 color_a = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z); \n    int black = 0;\n    \n    // Matrix!\n    float4x4 mr = m_r;\n    mr = mr.invert();\n    for(int c = 0; c<dst.kComps; c++)\{\n      color_r\[c] = mr\[c]\[0]*color_r\[0] + mr\[c]\[1]*color_r\[1] + mr\[c]\[2]*color_r\[2] + mr\[c]\[3]*1.0f;\n    \}\n\n    \n    float4x4 mg = m_g;\n    mg = mg.invert();\n    for(int c = 0; c<dst.kComps; c++)\{\n      color_g\[c] = mg\[c]\[0]*color_g\[0] + mg\[c]\[1]*color_g\[1] + mg\[c]\[2]*color_g\[2] + mg\[c]\[3]*1.0f;\n    \}\n\n\n    float4x4 mb = m_b;\n    mg = mg.invert();\n    for(int c = 0; c<dst.kComps; c++)\{\n      color_b\[c] = mb\[c]\[0]*color_b\[0] + mb\[c]\[1]*color_b\[1] + mb\[c]\[2]*color_b\[2] + mb\[c]\[3]*1.0f;\n    \}\n\n\n    float4x4 ma = m_a;\n    mg = mg.invert();\n    for(int c = 0; c<dst.kComps; c++)\{\n      color_a\[c] = ma\[c]\[0]*color_a\[0] + ma\[c]\[1]*color_a\[1] + ma\[c]\[2]*color_a\[2] + ma\[c]\[3]*1.0f;\n    \}\n\n\n    float dist;\n\n\n    \n\nfloat noise_r = (float)octave_noise_4d(float(noise_octaves_r),noise_persistence_r,noise_scale_r==0?10000.0f:1/noise_scale_r,color_r\[0],color_r\[1],color_r\[2],noise_offset_r,noise_lacunarity_r);\n    float noise_g = (float)octave_noise_4d(float(noise_octaves_g),noise_persistence_g,noise_scale_g==0?10000.0f:1/noise_scale_g,color_g\[0],color_g\[1],color_g\[2],noise_offset_g,noise_lacunarity_g);\n    float noise_b = (float)octave_noise_4d(float(noise_octaves_b),noise_persistence_b,noise_scale_b==0?10000.0f:1/noise_scale_b,color_b\[0],color_b\[1],color_b\[2],noise_offset_b,noise_lacunarity_b);\n    float noise_a = (float)octave_noise_4d(float(noise_octaves_a),noise_persistence_a,noise_scale_a==0?10000.0f:1/noise_scale_a,color_a\[0],color_a\[1],color_a\[2],noise_offset_a,noise_lacunarity_a);\n\n    noise_r = cl(pow(max((noise_r+noise_add_r)*noise_gain_r,0.0f),noise_gamma_r==0?1:1/noise_gamma_r));\n    noise_g = cl(pow(max((noise_g+noise_add_g)*noise_gain_g,0.0f),noise_gamma_g==0?1:1/noise_gamma_g));\n    noise_b = cl(pow(max((noise_b+noise_add_b)*noise_gain_b,0.0f),noise_gamma_b==0?1:1/noise_gamma_b));\n    noise_a = cl(pow(max((noise_a+noise_add_a)*noise_gain_a,0.0f),noise_gamma_a==0?1:1/noise_gamma_a));\n\n\n\n    float4 result = float4(noise_r, noise_g, noise_b, noise_a);\n\n    dst() = result;\n\n  \}\n\};"
  useGPUIfAvailable false
  vectorize false
  rebuild ""
  noise4DKernel_picked {{(parent.shape==3&&parent.mirrored)?picker-(black_point-picker):(parent.shape==5&&parent.mirrored)?picker-radius:picker} {(parent.shape==3&&parent.mirrored)?picker-(black_point-picker):(parent.shape==5&&parent.mirrored)?picker-radius:picker} {(parent.shape==3&&parent.mirrored)?picker-(black_point-picker):(parent.shape==5&&parent.mirrored)?picker-radius:picker}}
  noise4DKernel_pickedB {{parent.shape==5?parent.axis==0?picker+radius+0.0001:picker:black_point} {parent.shape==5?parent.axis==1?picker+radius+0.0001:picker:black_point} {parent.shape==5?parent.axis==2?picker+radius+0.0001:picker+0.00001:black_point}}
  noise4DKernel_m_r {
      {{parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix}}
      {{parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix}}
      {{parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix}}
      {{parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix}}
    }
  noise4DKernel_m_g {
      {{parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix}}
      {{parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix}}
      {{parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix}}
      {{parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix}}
    }
  noise4DKernel_m_b {
      {{parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix}}
      {{parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix}}
      {{parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix}}
      {{parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix}}
    }
  noise4DKernel_m_a {
      {{parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix}}
      {{parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix}}
      {{parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix}}
      {{parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix}}
    }
  "noise4DKernel_noise octaves r" {{parent.lumOctaves+1}}
  "noise4DKernel_noise octaves g" {{parent.contOctaves+2}}
  "noise4DKernel_noise octaves b" {{parent.contOctaves+1}}
  "noise4DKernel_noise octaves a" {{parent.maskOctaves+1}}
  "noise4DKernel_noise persistence r" {{parent.lumPersistence+.4}}
  "noise4DKernel_noise persistence g" {{parent.contPersistence+.1}}
  "noise4DKernel_noise persistence b" {{parent.contPersistence+1}}
  "noise4DKernel_noise persistence a" {{parent.maskPersistence}}
  "noise4DKernel_lacunarity r" {{parent.lumLacunarity-.2}}
  "noise4DKernel_lacunarity g" {{parent.conLacunarity}}
  "noise4DKernel_lacunarity b" {{parent.conLacunarity-1}}
  "noise4DKernel_lacunarity a" {{parent.maskLacunarity}}
  noise4DKernel_noise_offset_r {{parent.lumOffset+100}}
  noise4DKernel_noise_offset_g {{parent.contOffset+150}}
  noise4DKernel_noise_offset_b {{parent.satOffset+200}}
  noise4DKernel_noise_offset_a {{parent.maskOffset+200}}
  noise4DKernel_noise_add_r 0.55
  noise4DKernel_noise_add_g 0.588
  noise4DKernel_noise_add_b 0.5
  noise4DKernel_noise_add_a 0.75
  noise4DKernel_noise_gain_r {{parent.lumGain*1.25}}
  noise4DKernel_noise_gain_g {{parent.contGain*1.1}}
  noise4DKernel_noise_gain_b {{parent.contGain*1.1}}
  noise4DKernel_noise_gain_a {{parent.maskGain}}
  noise4DKernel_noise_gamma_r {{parent.lumGamma}}
  noise4DKernel_noise_gamma_g {{parent.contGamma/1.5}}
  noise4DKernel_noise_gamma_b {{parent.contGamma*1.5}}
  noise4DKernel_noise_gamma_a {{parent.maskGamma}}
  "noise4DKernel_noise scale r" {{parent.menu.noiseScaleR.h*3.3}}
  "noise4DKernel_noise scale g" {{parent.menu.noiseScaleG.h*1.15}}
  "noise4DKernel_noise scale b" {{parent.menu.noiseScaleB.h*1.15}}
  "noise4DKernel_noise scale a" {{parent.menu.noiseScaleA.h}}
  rebuild_finalise ""
  name BlinkScriptPMatte1
  xpos -1232
  ypos 1307
  addUserKnob {20 User}
  addUserKnob {18 picker}
  picker {0 0 0}
  addUserKnob {6 picker_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 picker_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {18 black_point l black}
  black_point {0 0 0}
  addUserKnob {6 black_point_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 black_point_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 AdjBBox {
  name AdjBBox1
  xpos -1232
  ypos 1339
 }
 Soften {
  channels rgba
  amount 1
  size 1
  name Soften2
  xpos -1232
  ypos 1365
 }
 MotionBlur3D {
  inputs 2
  distance {{parent.MotionBlur3D1.distance}}
  shutter {{parent.MotionBlur3D1.shutter}}
  shutteroffset centred
  name MotionBlur3D2
  xpos -1232
  ypos 1419
  disable {{!motionBlur}}
 }
 VectorBlur {
  channels {{{parent.VectorBlur2.channels}}}
  uv {{{parent.VectorBlur2.uv}}}
  constant {{parent.VectorBlur2.constant} {parent.VectorBlur2.constant}}
  scale {{parent.VectorBlur2.scale}}
  offset {{parent.VectorBlur2.offset}}
  grow_bbox {{parent.VectorBlur2.grow_bbox}}
  name VectorBlur1
  xpos -1232
  ypos 1445
  disable {{!motionBlur}}
 }
 Expression {
  expr0 0
  expr1 0
  expr2 0
  expr3 0
  name Expression8
  xpos -1232
  ypos 1496
  disable {{parent.img_in==0?0:1}}
 }
 Dot {
  name Dot21
  xpos -1198
  ypos 2039
 }
set Nc8991e00 [stack 0]
 Merge2 {
  inputs 2
  operation mask
  bbox B
  name Merge14
  xpos -1526
  ypos 2035
 }
push $Nc8975c00
push $Nc8976c00
 Dot {
  name Dot23
  xpos -737
  ypos 1453
 }
push $Nc897f600
 BlinkScript {
  recompileCount 60
  ProgramGroup 1
  KernelDescription "2 \"noise4DKernel\" iterate pixelWise a05d21619d7aff6c29dc58c43f1db443ae69e67492bb5e8bb2a3812029973d9b 2 \"p\" Read Point \"dst\" Write Point 38 \"picked\" Float 3 AAAAAAAAAAAAAAAAAAAAAA== \"pickedB\" Float 3 AAAAAAAAAAAAAAAAAAAAAA== \"m_r\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"m_g\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"m_b\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"m_a\" Float 16 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA== \"noise octaves r\" Float 1 AAAAPw== \"noise octaves g\" Float 1 AACAPw== \"noise octaves b\" Float 1 AAAAQA== \"noise octaves a\" Float 1 AAAAQA== \"noise persistence r\" Float 1 AACAPg== \"noise persistence g\" Float 1 AAAAPw== \"noise persistence b\" Float 1 AABAPw== \"noise persistence a\" Float 1 AABAPw== \"lacunarity r\" Float 1 AADAPw== \"lacunarity g\" Float 1 AAAAQA== \"lacunarity b\" Float 1 AAAgQA== \"lacunarity a\" Float 1 AAAgQA== \"noise_offset_r\" Float 1 AAAAAA== \"noise_offset_g\" Float 1 AAAAAA== \"noise_offset_b\" Float 1 AAAAAA== \"noise_offset_a\" Float 1 AAAAAA== \"noise_add_r\" Float 1 AAAAAA== \"noise_add_g\" Float 1 AAAAAA== \"noise_add_b\" Float 1 AAAAAA== \"noise_add_a\" Float 1 AAAAAA== \"noise_gain_r\" Float 1 AAAAAA== \"noise_gain_g\" Float 1 AAAAAA== \"noise_gain_b\" Float 1 AAAAAA== \"noise_gain_a\" Float 1 AAAAAA== \"noise_gamma_r\" Float 1 AAAAAA== \"noise_gamma_g\" Float 1 AAAAAA== \"noise_gamma_b\" Float 1 AAAAAA== \"noise_gamma_a\" Float 1 AAAAAA== \"noise scale r\" Float 1 AABIQg== \"noise scale g\" Float 1 PQpwQg== \"noise scale b\" Float 1 HwWMQg== \"noise scale a\" Float 1 HwWMQg== 38 \"picked\" 3 1 \"pickedB\" 3 1 \"m_r\" 16 1 \"m_g\" 16 1 \"m_b\" 16 1 \"m_a\" 16 1 \"noise_octaves_r\" 1 1 \"noise_octaves_g\" 1 1 \"noise_octaves_b\" 1 1 \"noise_octaves_a\" 1 1 \"noise_persistence_r\" 1 1 \"noise_persistence_g\" 1 1 \"noise_persistence_b\" 1 1 \"noise_persistence_a\" 1 1 \"noise_lacunarity_r\" 1 1 \"noise_lacunarity_g\" 1 1 \"noise_lacunarity_b\" 1 1 \"noise_lacunarity_a\" 1 1 \"noise_offset_r\" 1 1 \"noise_offset_g\" 1 1 \"noise_offset_b\" 1 1 \"noise_offset_a\" 1 1 \"noise_add_r\" 1 1 \"noise_add_g\" 1 1 \"noise_add_b\" 1 1 \"noise_add_a\" 1 1 \"noise_gain_r\" 1 1 \"noise_gain_g\" 1 1 \"noise_gain_b\" 1 1 \"noise_gain_a\" 1 1 \"noise_gamma_r\" 1 1 \"noise_gamma_g\" 1 1 \"noise_gamma_b\" 1 1 \"noise_gamma_a\" 1 1 \"noise_scale_r\" 1 1 \"noise_scale_g\" 1 1 \"noise_scale_b\" 1 1 \"noise_scale_a\" 1 1 0"
  kernelSource "// ----------------------------------------------------------------\n// aeDirtCG v1.0 by Aitor Echeveste 2023\n// ----------------------------------------------------------------\n// Noise algorithm adapted by Aitor Echeveste from Noise4D function by Mads Hagbarth and Adrian Pueyo\n// Noise4D function Ported by Mads Hagbarth Lund 2014\n// Based on https://github.com/Draradech/csworldgen/blob/master/simplexnoise.cpp\n\n\n\n\nint fastfloor( const float x ) \{ return x > 0 ? (int) x : (int) x - 1; \}\ninline float raw_noise_4d( const float x, const float y, const float z, const float w ) \n\{\nint simplex\[64]\[4] = \{\n    \{0,1,2,3\},\{0,1,3,2\},\{0,0,0,0\},\{0,2,3,1\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{1,2,3,0\},\n    \{0,2,1,3\},\{0,0,0,0\},\{0,3,1,2\},\{0,3,2,1\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{1,3,2,0\},\n    \{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\n    \{1,2,0,3\},\{0,0,0,0\},\{1,3,0,2\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{2,3,0,1\},\{2,3,1,0\},\n    \{1,0,2,3\},\{1,0,3,2\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{2,0,3,1\},\{0,0,0,0\},\{2,1,3,0\},\n    \{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\n    \{2,0,1,3\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{3,0,1,2\},\{3,0,2,1\},\{0,0,0,0\},\{3,1,2,0\},\n    \{2,1,0,3\},\{0,0,0,0\},\{0,0,0,0\},\{0,0,0,0\},\{3,1,0,2\},\{0,0,0,0\},\{3,2,0,1\},\{3,2,1,0\}\n\};\n    int perm\[512] = \{\n        151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,\n        8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,\n        35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,\n        134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,\n        55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208, 89,\n        18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,\n        250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,\n        189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,\n        172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,\n        228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,\n        107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,\n        138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,\n\n        151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,\n        8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,\n        35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,\n        134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,\n        55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208, 89,\n        18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,\n        250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,\n        189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,\n        172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,\n        228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,\n        107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,\n        138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180\n    \};\n  int grad4\[32]\[4]= \{\n    \{0,1,1,1\},  \{0,1,1,-1\},  \{0,1,-1,1\},  \{0,1,-1,-1\},\n    \{0,-1,1,1\}, \{0,-1,1,-1\}, \{0,-1,-1,1\}, \{0,-1,-1,-1\},\n    \{1,0,1,1\},  \{1,0,1,-1\},  \{1,0,-1,1\},  \{1,0,-1,-1\},\n    \{-1,0,1,1\}, \{-1,0,1,-1\}, \{-1,0,-1,1\}, \{-1,0,-1,-1\},\n    \{1,1,0,1\},  \{1,1,0,-1\},  \{1,-1,0,1\},  \{1,-1,0,-1\},\n    \{-1,1,0,1\}, \{-1,1,0,-1\}, \{-1,-1,0,1\}, \{-1,-1,0,-1\},\n    \{1,1,1,0\},  \{1,1,-1,0\},  \{1,-1,1,0\},  \{1,-1,-1,0\},\n    \{-1,1,1,0\}, \{-1,1,-1,0\}, \{-1,-1,1,0\}, \{-1,\n\n-1,-1,0\}\n  \};\n    float F4 = (sqrt(5.0f)-1.0)/4.0;\n    float G4 = (5.0-sqrt(5.0f))/20.0;\n    float n0, n1, n2, n3, n4;\n    float s = (x + y + z + w) * F4;\n    int i = fastfloor(x + s);\n    int j = fastfloor(y + s);\n    int k = fastfloor(z + s);\n    int l = fastfloor(w + s);\n    float t = (i + j + k + l) * G4;\n    float X0 = i - t;\n    float Y0 = j - t;\n    float Z0 = k - t;\n    float W0 = l - t;\n\n    float x0 = x - X0;\n    float y0 = y - Y0;\n    float z0 = z - Z0;\n    float w0 = w - W0;\n    int c1 = (x0 > y0) ? 32 : 0;\n    int c2 = (x0 > z0) ? 16 : 0;\n    int c3 = (y0 > z0) ? 8 : 0;\n    int c4 = (x0 > w0) ? 4 : 0;\n    int c5 = (y0 > w0) ? 2 : 0;\n    int c6 = (z0 > w0) ? 1 : 0;\n    int c = c1 + c2 + c3 + c4 + c5 + c6;\n\n    int i1, j1, k1, l1;\n    int i2, j2, k2, l2;\n    int i3, j3, k3, l3;\n    i1 = simplex\[c]\[0]>=3 ? 1 : 0;\n    j1 = simplex\[c]\[1]>=3 ? 1 : 0;\n    k1 = simplex\[c]\[2]>=3 ? 1 : 0;\n    l1 = simplex\[c]\[3]>=3 ? 1 : 0;\n    i2 = simplex\[c]\[0]>=2 ? 1 : 0;\n    j2 = simplex\[c]\[1]>=2 ? 1 : 0;\n    k2 = simplex\[c]\[2]>=2 ? 1 : 0;\n    l2 = simplex\[c]\[3]>=2 ? 1 : 0;\n    i3 = simplex\[c]\[0]>=1 ? 1 : 0;\n    j3 = simplex\[c]\[1]>=1 ? 1 : 0;\n    k3 = simplex\[c]\[2]>=1 ? 1 : 0;\n    l3 = simplex\[c]\[3]>=1 ? 1 : 0;\n    float x1 = x0 - i1 + G4;\n    float y1 = y0 - j1 + G4;\n    float z1 = z0 - k1 + G4;\n    float w1 = w0 - l1 + G4;\n    float x2 = x0 - i2 + 2.0*G4;\n    float y2 = y0 - j2 + 2.0*G4;\n    float z2 = z0 - k2 + 2.0*G4;\n    float w2 = w0 - l2 + 2.0*G4;\n    float x3 = x0 - i3 + 3.0*G4;\n    float y3 = y0 - j3 + 3.0*G4;\n    float z3 = z0 - k3 + 3.0*G4;\n    float w3 = w0 - l3 + 3.0*G4;\n    float x4 = x0 - 1.0 + 4.0*G4;\n    float y4 = y0 - 1.0 + 4.0*G4;\n    float z4 = z0 - 1.0 + 4.0*G4;\n    float w4 = w0 - 1.0 + 4.0*G4;\n    int ii = i & 255;\n    int jj = j & 255;\n    int kk = k & 255;\n    int ll = l & 255;\n    int gi0 = perm\[ii+perm\[jj+perm\[kk+perm\[ll]]]] % 32;\n    int gi1 = perm\[ii+i1+perm\[jj+j1+perm\[kk+k1+perm\[ll+l1]]]] % 32;\n    int gi2 = perm\[ii+i2+perm\[jj+j2+perm\[kk+k2+perm\[ll+l2]]]] % 32;\n    int gi3 = perm\[ii+i3+perm\[jj+j3+perm\[kk+k3+perm\[ll+l3]]]] % 32;\n    int gi4 = perm\[ii+1+perm\[jj+1+perm\[kk+1+perm\[ll+1]]]] % 32;\n    float t0 = 0.6 - x0*x0 - y0*y0 - z0*z0 - w0*w0;\n    if(t0<0) n0 = 0.0;\n    else \{\n        t0 *= t0;\n        n0 = t0 * t0 * dot(float4(grad4\[gi0]\[0],grad4\[gi0]\[2],grad4\[gi0]\[3],grad4\[gi0]\[3]), float4(x0, y0, z0, w0));\n    \}\n    float t1 = 0.6 - x1*x1 - y1*y1 - z1*z1 - w1*w1;\n    if(t1<0) n1 = 0.0;\n    else \{\n        t1 *= t1;\n        n1 = t1 * t1 * dot(float4(grad4\[gi1]\[0],grad4\[gi1]\[2],grad4\[gi1]\[3],grad4\[gi1]\[3]), float4(x1, y1, z1, w1));\n    \}\n    float t2 = 0.6 - x2*x2 - y2*y2 - z2*z2 - w2*w2;\n    if(t2<0) n2 = 0.0;\n    else \{\n        t2 *= t2;\n        n2 = t2 * t2 * dot(float4(grad4\[gi2]\[0],grad4\[gi2]\[2],grad4\[gi2]\[3],grad4\[gi2]\[3]), float4(x2, y2, z2, w2));\n    \}\n    float t3 = 0.6 - x3*x3 - y3*y3 - z3*z3 - w3*w3;\n    if(t3<0) n3 = 0.0;\n    else \{\n        t3 *= t3;\n        n3 = t3 * t3 * dot(float4(grad4\[gi3]\[0],grad4\[gi3]\[2],grad4\[gi3]\[3],grad4\[gi3]\[3]), float4(x3, y3, z3, w3));\n    \}\n    float t4 = 0.6 - x4*x4 - y4*y4 - z4*z4 - w4*w4;\n    if(t4<0) n4 = 0.0;\n    else \{\n        t4 *= t4;\n        n4 = t4 * t4 * dot(float4(grad4\[gi4]\[0],grad4\[gi4]\[2],grad4\[gi4]\[3],grad4\[gi4]\[3]), float4(x4, y4, z4, w4));\n    \}\n    return 27.0 * (n0 + n1 + n2 + n3 + n4);\n\}\ninline float octave_noise_4d( const float octaves, const float persistence, const float scale, const float x, const float y, const float z, const float w, const float lacunarity=2 ) \n\{\n    float total = 0;\n    float frequency = scale;\n    float amplitude = 1;\n    float maxAmplitude = 0;\n    for( int i=0; i < octaves; i++ ) \{\n        total += (float)raw_noise_4d( x * frequency, y * frequency, z * frequency, w * frequency ) * amplitude;\n\n        frequency *= lacunarity;\n        maxAmplitude += amplitude;\n        amplitude *= persistence;\n    \}\n    \n\nreturn float(total / maxAmplitude);\n\}\n\n\n\nkernel noise4DKernel : ImageComputationKernel<ePixelWise>\n\{\n  Image<eRead, eAccessPoint, eEdgeClamped> p;\n  Image<eWrite> dst;\n\n  param:\n    float3 picked; //Center, or white for ramps\n    float3 pickedB; //Black for ramps\n    float4x4 m_r; //Camera or axis matrix.\n    float4x4 m_g; //Camera or axis matrix.\n    float4x4 m_b; //Camera or axis matrix.\n    float4x4 m_a; //Camera or axis matrix.\n\n\n    // Noise parameters\n    float noise_octaves_r;\n    float noise_octaves_g;\n    float noise_octaves_b;\n    float noise_octaves_a;\n    float noise_persistence_r;\n    float noise_persistence_g;\n    float noise_persistence_b;\n    float noise_persistence_a;\n    float noise_lacunarity_r;\n    float noise_lacunarity_g;\n    float noise_lacunarity_b;\n    float noise_lacunarity_a;\n    float noise_offset_r;\n    float noise_offset_g;\n    float noise_offset_b;\n    float noise_offset_a;\n    float noise_add_r;\n    float noise_add_g;\n    float noise_add_b;\n    float noise_add_a;\n    float noise_gain_r;\n    float noise_gain_g;\n    float noise_gain_b;\n    float noise_gain_a;\n    float noise_gamma_r;\n    float noise_gamma_g;\n    float noise_gamma_b;\n    float noise_gamma_a;\n    float noise_scale_r;\n    float noise_scale_g;\n    float noise_scale_b;\n    float noise_scale_a;\n\n\n\n\n\n  void define() \{\n    defineParam(noise_octaves_r, \"noise octaves r\", 0.5f);\n    defineParam(noise_octaves_g, \"noise octaves g\", 1.0f);\n    defineParam(noise_octaves_b, \"noise octaves b\", 2.0f);\n    defineParam(noise_octaves_a, \"noise octaves a\", 2.0f);\n    defineParam(noise_persistence_r, \"noise persistence r\",  0.25f);\n    defineParam(noise_persistence_g, \"noise persistence g\",  0.5f);\n    defineParam(noise_persistence_b, \"noise persistence b\",  0.75f);\n    defineParam(noise_persistence_a, \"noise persistence a\",  0.75f);\n    defineParam(noise_lacunarity_r, \"lacunarity r\",  1.5f);\n    defineParam(noise_lacunarity_g, \"lacunarity g\",  2.0f);\n    defineParam(noise_lacunarity_b, \"lacunarity b\",  2.5f);\n    defineParam(noise_lacunarity_a, \"lacunarity a\",  2.5f);\n    defineParam(noise_scale_r, \"noise scale r\", 50.f);\n    defineParam(noise_scale_g, \"noise scale g\", 60.01f);\n    defineParam(noise_scale_b, \"noise scale b\", 70.01f);\n    defineParam(noise_scale_a, \"noise scale a\", 70.01f);\n\n  \}\n\n\n  inline float rad(float deg)\{ \n    return deg*PI/180;\n  \}\n\n  inline float smoothstep(float edge0, float edge1, float x)\{\n    x = clamp((x - edge0)/(edge1 - edge0), 0.0f, 1.0f);\n    return x*x*x*(x*(x*6-15)+10);\n  \}\n\n  inline float cl(float val)\{\n  return clamp(val,0.0f,1.0f); \n  \}\n\n\n  void process() \{\n    //1. P WORLD\n    // Center the coordinates\n    float3 color_r = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z);\n    float3 color_g = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z);\n    float3 color_b = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z);   \n    float3 color_a = float3(p(0)-picked.x,p(1)-picked.y,p(2)-picked.z); \n    int black = 0;\n    \n    // Matrix!\n    float4x4 mr = m_r;\n    mr = mr.invert();\n    for(int c = 0; c<dst.kComps; c++)\{\n      color_r\[c] = mr\[c]\[0]*color_r\[0] + mr\[c]\[1]*color_r\[1] + mr\[c]\[2]*color_r\[2] + mr\[c]\[3]*1.0f;\n    \}\n\n    \n    float4x4 mg = m_g;\n    mg = mg.invert();\n    for(int c = 0; c<dst.kComps; c++)\{\n      color_g\[c] = mg\[c]\[0]*color_g\[0] + mg\[c]\[1]*color_g\[1] + mg\[c]\[2]*color_g\[2] + mg\[c]\[3]*1.0f;\n    \}\n\n\n    float4x4 mb = m_b;\n    mg = mg.invert();\n    for(int c = 0; c<dst.kComps; c++)\{\n      color_b\[c] = mb\[c]\[0]*color_b\[0] + mb\[c]\[1]*color_b\[1] + mb\[c]\[2]*color_b\[2] + mb\[c]\[3]*1.0f;\n    \}\n\n\n    float4x4 ma = m_a;\n    mg = mg.invert();\n    for(int c = 0; c<dst.kComps; c++)\{\n      color_a\[c] = ma\[c]\[0]*color_a\[0] + ma\[c]\[1]*color_a\[1] + ma\[c]\[2]*color_a\[2] + ma\[c]\[3]*1.0f;\n    \}\n\n\n    float dist;\n\n\n    \n\nfloat noise_r = (float)octave_noise_4d(float(noise_octaves_r),noise_persistence_r,noise_scale_r==0?10000.0f:1/noise_scale_r,color_r\[0],color_r\[1],color_r\[2],noise_offset_r,noise_lacunarity_r);\n    float noise_g = (float)octave_noise_4d(float(noise_octaves_g),noise_persistence_g,noise_scale_g==0?10000.0f:1/noise_scale_g,color_g\[0],color_g\[1],color_g\[2],noise_offset_g,noise_lacunarity_g);\n    float noise_b = (float)octave_noise_4d(float(noise_octaves_b),noise_persistence_b,noise_scale_b==0?10000.0f:1/noise_scale_b,color_b\[0],color_b\[1],color_b\[2],noise_offset_b,noise_lacunarity_b);\n    float noise_a = (float)octave_noise_4d(float(noise_octaves_a),noise_persistence_a,noise_scale_a==0?10000.0f:1/noise_scale_a,color_a\[0],color_a\[1],color_a\[2],noise_offset_a,noise_lacunarity_a);\n\n    noise_r = cl(pow(max((noise_r+noise_add_r)*noise_gain_r,0.0f),noise_gamma_r==0?1:1/noise_gamma_r));\n    noise_g = cl(pow(max((noise_g+noise_add_g)*noise_gain_g,0.0f),noise_gamma_g==0?1:1/noise_gamma_g));\n    noise_b = cl(pow(max((noise_b+noise_add_b)*noise_gain_b,0.0f),noise_gamma_b==0?1:1/noise_gamma_b));\n    noise_a = cl(pow(max((noise_a+noise_add_a)*noise_gain_a,0.0f),noise_gamma_a==0?1:1/noise_gamma_a));\n\n\n\n    float4 result = float4(noise_r, noise_g, noise_b, noise_a);\n\n    dst() = result;\n\n  \}\n\};"
  useGPUIfAvailable false
  vectorize false
  rebuild ""
  noise4DKernel_picked {{(parent.shape==3&&parent.mirrored)?picker-(black_point-picker):(parent.shape==5&&parent.mirrored)?picker-radius:picker} {(parent.shape==3&&parent.mirrored)?picker-(black_point-picker):(parent.shape==5&&parent.mirrored)?picker-radius:picker} {(parent.shape==3&&parent.mirrored)?picker-(black_point-picker):(parent.shape==5&&parent.mirrored)?picker-radius:picker}}
  noise4DKernel_pickedB {{parent.shape==5?parent.axis==0?picker+radius+0.0001:picker:black_point} {parent.shape==5?parent.axis==1?picker+radius+0.0001:picker:black_point} {parent.shape==5?parent.axis==2?picker+radius+0.0001:picker+0.00001:black_point}}
  noise4DKernel_m_r {
      {{parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix}}
      {{parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix}}
      {{parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix}}
      {{parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix} {parent.Axis_r.world_matrix}}
    }
  noise4DKernel_m_g {
      {{parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix}}
      {{parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix}}
      {{parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix}}
      {{parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix} {parent.Axis_g.world_matrix}}
    }
  noise4DKernel_m_b {
      {{parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix}}
      {{parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix}}
      {{parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix}}
      {{parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix} {parent.Axis_b.world_matrix}}
    }
  noise4DKernel_m_a {
      {{parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix}}
      {{parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix}}
      {{parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix}}
      {{parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix} {parent.Axis_a.world_matrix}}
    }
  "noise4DKernel_noise octaves r" {{parent.lumOctaves}}
  "noise4DKernel_noise octaves g" {{parent.contOctaves}}
  "noise4DKernel_noise octaves b" {{parent.satOctaves}}
  "noise4DKernel_noise octaves a" {{parent.maskOctaves}}
  "noise4DKernel_noise persistence r" {{parent.lumPersistence}}
  "noise4DKernel_noise persistence g" {{parent.contPersistence}}
  "noise4DKernel_noise persistence b" {{parent.satPersistence}}
  "noise4DKernel_noise persistence a" {{parent.maskPersistence}}
  "noise4DKernel_lacunarity r" {{parent.lumLacunarity}}
  "noise4DKernel_lacunarity g" {{parent.conLacunarity}}
  "noise4DKernel_lacunarity b" {{parent.satLacunarity}}
  "noise4DKernel_lacunarity a" {{parent.maskLacunarity}}
  noise4DKernel_noise_offset_r {{parent.lumOffset}}
  noise4DKernel_noise_offset_g {{parent.contOffset}}
  noise4DKernel_noise_offset_b {{parent.satOffset}}
  noise4DKernel_noise_offset_a {{parent.maskOffset}}
  noise4DKernel_noise_add_r 0.5
  noise4DKernel_noise_add_g 0.5
  noise4DKernel_noise_add_b 0.5
  noise4DKernel_noise_add_a 0.75
  noise4DKernel_noise_gain_r {{parent.lumGain}}
  noise4DKernel_noise_gain_g {{parent.contGain}}
  noise4DKernel_noise_gain_b {{parent.satGain}}
  noise4DKernel_noise_gain_a {{parent.maskGain}}
  noise4DKernel_noise_gamma_r {{parent.lumGamma}}
  noise4DKernel_noise_gamma_g {{parent.contGamma}}
  noise4DKernel_noise_gamma_b {{parent.satGamma}}
  noise4DKernel_noise_gamma_a {{parent.maskGamma}}
  "noise4DKernel_noise scale r" {{parent.menu.noiseScaleR.w}}
  "noise4DKernel_noise scale g" {{parent.menu.noiseScaleG.w}}
  "noise4DKernel_noise scale b" {{parent.menu.noiseScaleB.w}}
  "noise4DKernel_noise scale a" {{parent.menu.noiseScaleA.w}}
  rebuild_finalise ""
  name BlinkScriptPMatte
  xpos -1111
  ypos 1308
  addUserKnob {20 User}
  addUserKnob {18 picker}
  picker {0 0 0}
  addUserKnob {6 picker_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 picker_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {18 black_point l black}
  black_point {0 0 0}
  addUserKnob {6 black_point_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 black_point_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 AdjBBox {
  name AdjBBox2
  xpos -1111
  ypos 1340
 }
 Soften {
  channels rgba
  amount 1
  size 1
  name Soften1
  xpos -1111
  ypos 1366
 }
 MotionBlur3D {
  inputs 2
  shutteroffset centred
  name MotionBlur3D1
  xpos -1111
  ypos 1449
  disable {{!motionBlur}}
 }
 VectorBlur {
  channels rgba
  uv motion
  grow_bbox 15
  name VectorBlur2
  xpos -1111
  ypos 1473
  disable {{!motionBlur}}
 }
 Expression {
  expr0 0
  expr1 0
  expr2 0
  expr3 0
  name Expression7
  xpos -1111
  ypos 1497
  disable {{parent.img_in==0?0:1}}
 }
 Dot {
  name Dot19
  xpos -1077
  ypos 1965
 }
set Nc8984600 [stack 0]
 Merge2 {
  inputs 2
  operation mask
  bbox B
  name Merge10
  xpos -1436
  ypos 1961
 }
 Constant {
  inputs 0
  channels rgb
  name export
  xpos -1780
  ypos -352
  postage_stamp false
 }
 Dot {
  name Dot25
  xpos -1746
  ypos -280
 }
set Nc8993000 [stack 0]
push $Nc8975800
push $Nc8993000
 Dot {
  name Dot26
  xpos -1541
  ypos -280
 }
add_layer {noiseExtra noiseExtra.red noiseExtra.green noiseExtra.blue noiseExtra.alpha}
 Copy {
  inputs 2
  from0 rgba.alpha
  to0 rgba.alpha
  from1 rgba.alpha
  to1 noiseExtra.alpha
  name Copy4
  xpos -1575
  ypos -238
 }
 Switch {
  inputs 2
  which {{!inputNoise}}
  name Switch4
  xpos -1780
  ypos -226
 }
 Copy {
  inputs 2
  from0 rgba.red
  to0 rgba.red
  from1 rgba.green
  to1 rgba.green
  from2 rgba.blue
  to2 rgba.blue
  from3 rgba.alpha
  to3 rgba.alpha
  name Copy2
  xpos -1780
  ypos 1937
 }
 Copy {
  inputs 2
  from0 rgba.red
  to0 noiseExtra.red
  from1 rgba.green
  to1 noiseExtra.green
  from2 rgba.blue
  to2 noiseExtra.blue
  from3 rgba.alpha
  to3 noiseExtra.alpha
  name Copy3
  xpos -1780
  ypos 2011
 }
 Dot {
  name Dot20
  xpos -1746
  ypos 5754
 }
 Dot {
  inputs 0
  name connectInput2
  label "Dynamic noise input"
  note_font_size 50
  xpos -2875
  ypos 2328
 }
set Nc8994e00 [stack 0]
 Shuffle {
  in noiseExtra
  name Shuffle1
  label "\[knob in1]"
  xpos -1349
  ypos 2318
 }
push $Nc8991e00
 Switch {
  inputs 2
  which {{parent.inputNoise}}
  name Switch3
  xpos -1232
  ypos 2324
 }
 Dot {
  name Dot10
  xpos -1198
  ypos 3017
 }
set Nc89b6000 [stack 0]
 Dot {
  name Dot32
  xpos -1198
  ypos 3717
 }
set Nc89b6400 [stack 0]
 Dot {
  name Dot4
  xpos -1198
  ypos 3798
 }
set Nc89b6800 [stack 0]
 Dot {
  name Dot6
  xpos -1198
  ypos 4559
 }
set Nc89b6c00 [stack 0]
 Expression {
  expr0 a
  expr1 0
  expr2 0
  expr3 a
  name Expression4
  xpos -1232
  ypos 4623
 }
 Dot {
  name Dot35
  xpos -1198
  ypos 4686
 }
push $Nc8994e00
 Dot {
  name Dot22
  xpos -2875
  ypos 2443
 }
push $Nc8984600
 Switch {
  inputs 2
  which {{parent.inputNoise}}
  name Switch2
  xpos -1111
  ypos 2439
 }
 Dot {
  name Dot3
  xpos -1077
  ypos 2919
 }
set Nc89b8600 [stack 0]
 Dot {
  name Dot5
  xpos -1077
  ypos 3657
 }
set Nc89b8a00 [stack 0]
 Dot {
  name Dot7
  xpos -1077
  ypos 4460
 }
set Nc89b8e00 [stack 0]
 Expression {
  expr0 0
  expr1 0
  expr2 a
  expr3 a
  name Expression5
  xpos -1110
  ypos 4626
 }
 Merge2 {
  inputs 2
  operation screen
  name Merge12
  xpos -1110
  ypos 4682
 }
push $Nc89b6c00
 Dot {
  name Dot33
  xpos -829
  ypos 4558
 }
set Nc89b9a00 [stack 0]
 Expression {
  expr3 a
  name noiseMask4
  xpos -863
  ypos 4594
 }
push $Nc89b9a00
 Expression {
  expr0 0
  expr1 0
  expr3 b
  name blue2
  xpos -764
  ypos 4554
 }
 Merge2 {
  inputs 2
  operation mask
  bbox B
  mix {{parent.alphaMaskMix}}
  name Merge11
  xpos -764
  ypos 4594
 }
set Nc89bae00 [stack 0]
 Expression {
  expr0 b
  expr1 0
  expr2 0
  expr3 b
  name Expression3
  xpos -764
  ypos 4644
 }
 Dot {
  name Dot18
  xpos -730
  ypos 4679
 }
push $Nc89b8e00
 Dot {
  name Dot34
  xpos -762
  ypos 4461
 }
set Nc89bc200 [stack 0]
 Expression {
  expr3 a
  name noiseMask5
  xpos -796
  ypos 4498
 }
push $Nc89bc200
 Expression {
  expr0 0
  expr1 0
  expr3 b
  name blue
  xpos -660
  ypos 4457
 }
 Merge2 {
  inputs 2
  operation mask
  bbox B
  mix {{parent.alphaMaskMix}}
  name Merge9
  xpos -660
  ypos 4498
 }
set Nc89bce00 [stack 0]
 Merge2 {
  inputs 2
  operation screen
  name Merge3
  xpos -660
  ypos 4675
 }
push $Nc89b6400
 Expression {
  expr3 a
  name noiseMask2
  xpos -868
  ypos 3713
 }
push $Nc89b8a00
 Dot {
  name Dot31
  xpos -896
  ypos 3657
 }
set Nc89a6800 [stack 0]
 Expression {
  expr0 0
  expr2 0
  expr3 g
  name green
  xpos -753
  ypos 3653
 }
 Merge2 {
  inputs 2
  operation mask
  bbox B
  mix {{parent.alphaMaskMix}}
  name Merge6
  xpos -753
  ypos 3713
 }
set Nc89a7000 [stack 0]
 Expression {
  expr0 0
  expr1 0
  expr2 g
  expr3 g
  name Expression2
  xpos -753
  ypos 3739
 }
 Dot {
  name Dot17
  xpos -719
  ypos 3906
 }
push $Nc89a6800
 Expression {
  expr3 a
  name noiseMask3
  xpos -930
  ypos 3844
 }
push $Nc89b6800
 Expression {
  expr0 0
  expr2 0
  expr3 g
  name green2
  xpos -670
  ypos 3794
 }
 Merge2 {
  inputs 2
  operation mask
  bbox B
  mix {{parent.alphaMaskMix}}
  name Merge8
  xpos -670
  ypos 3844
 }
set Nc89a8c00 [stack 0]
 Merge2 {
  inputs 2
  operation screen
  name Merge2
  xpos -670
  ypos 3902
 }
push $Nc89b6000
 Dot {
  name Dot29
  xpos -862
  ypos 3017
 }
set Nc89a9c00 [stack 0]
 Expression {
  expr3 a
  name noiseMask
  xpos -896
  ypos 3052
 }
push $Nc89a9c00
 Expression {
  expr1 0
  expr2 0
  expr3 r
  name red2
  xpos -760
  ypos 3013
 }
set Nc89aac00 [stack 0]
 Merge2 {
  inputs 2
  operation mask
  bbox B
  mix {{parent.alphaMaskMix}}
  name Merge13
  xpos -760
  ypos 3052
 }
 Expression {
  expr0 0
  expr1 r
  expr2 0
  expr3 r
  name Expression1
  xpos -760
  ypos 3078
 }
 Dot {
  name Dot16
  xpos -726
  ypos 3136
 }
push $Nc89b8600
 Dot {
  name Dot30
  xpos -772
  ypos 2919
 }
set Nc89adc00 [stack 0]
 Expression {
  expr3 a
  name noiseMask1
  xpos -806
  ypos 2955
 }
push $Nc89adc00
 Expression {
  expr1 0
  expr2 0
  expr3 r
  name red
  xpos -670
  ypos 2915
 }
 Merge2 {
  inputs 2
  operation mask
  bbox B
  mix {{parent.alphaMaskMix}}
  name Merge7
  xpos -670
  ypos 2955
 }
set Nc89ae800 [stack 0]
 Merge2 {
  inputs 2
  operation screen
  name Merge1
  xpos -670
  ypos 3132
 }
 Input {
  inputs 0
  name mask
  xpos -558
  ypos 4818
  number 2
 }
push $Nc8974c00
push $Nc89bae00
push $Nc89bce00
push $Nc8974800
 FilterErode {
  size 2
  name FilterErode1
  xpos -412
  ypos 3608
 }
 Blur {
  channels rgba
  size 2
  name Blur2
  xpos -412
  ypos 3646
 }
 Invert {
  channels rgba
  name Invert1
  xpos -412
  ypos 3672
 }
set Nc89be400 [stack 0]
push $Nc89a8c00
 Merge2 {
  inputs 2
  operation stencil
  bbox B
  name Merge16
  xpos -412
  ypos 3844
 }
push $Nc89be400
push $Nc89a7000
 Merge2 {
  inputs 2
  operation stencil
  bbox B
  name Merge15
  xpos -412
  ypos 3713
 }
push $Nc89aac00
 Blur {
  channels rgba
  size 5
  mix 0.25
  name Blur1
  xpos -432
  ypos 3013
 }
push $Nc89ae800
push $Nc897c800
 Grade {
  inputs 1+1
  white {0.754167 0.7866666317 0.739166677 0.6100000143}
  multiply {{parent.lumMultiply} {parent.lumMultiply} {parent.lumMultiply} {parent.lumMultiply}}
  gamma {0.8799999356 0.9 0.8799999356 1}
  black_clamp false
  unpremult -rgba.alpha
  mix {{parent.luminanceMix}}
  name Gradedirt1
  xpos -252
  ypos 2955
  disable {{1-parent.DirtOn x1001 1 x1037 1}}
 }
 Grade {
  inputs 1+1
  white {0.6119999886 0.65 0.6364102364 1}
  multiply {{parent.lumMultiply} {parent.lumMultiply} {parent.lumMultiply} {parent.lumMultiply}}
  black_clamp false
  unpremult -rgba.alpha
  mix {{parent.luminanceMix}}
  name GradedirtStain1
  xpos -252
  ypos 3013
  disable {{1-parent.DirtOn x1001 1}}
 }
 ColorCorrect {
  inputs 1+1
  contrast 1.24
  midtones.saturation 0.5
  midtones.contrast 1.34
  midtones.gain 1.44
  highlights.contrast 1.07
  highlights.gain 1.86
  lookup {shadow {curve 1 s0 x0.05491140112 0 s0}
    midtone {1-shadow-highlight}
    highlight {curve x0.3050633073 0 s0 x0.6101266146 1 s0}}
  unpremult -rgba.alpha
  mix {{parent.contrastMix}}
  name ColorCorrectContrast1
  xpos -246
  ypos 3713
  disable {{1-parent.ContrastOn}}
 }
 ColorCorrect {
  inputs 1+1
  contrast 1.06
  shadows.gamma 1.3
  midtones.contrast 0.92
  midtones.gamma 0.92
  midtones.gain 2
  highlights.gamma 0.88
  highlights.gain 1.33
  lookup {shadow {curve 1 s0 x0.0514652133 0 s0}
    midtone {1-shadow-highlight}
    highlight {curve x0.2859178185 0 s0 x0.5718356371 1 s0}}
  unpremult -rgba.alpha
  mix {{parent.contrastMix}}
  name ColorCorrectHigh1
  xpos -246
  ypos 3844
  disable {{1-parent.ContrastOn}}
 }
 HueShift {
  inputs 1+1
  channels rgba
  color_saturation 0.52
  hue_rotation 5
  unpremult -rgba.alpha
  mix {{parent.colorMix}}
  name HueShift_greener1
  xpos -246
  ypos 4498
  disable {{1-parent.HueOn x1001 1}}
 }
 HueShift {
  inputs 1+1
  hue_rotation -5
  unpremult -rgba.alpha
  mix {{parent.colorMix}}
  name HueShift1
  xpos -246
  ypos 4594
  disable {{1-parent.HueOn}}
 }
 Copy {
  inputs 2
  from0 rgba.alpha
  to0 rgba.alpha
  name Copy1
  xpos -246
  ypos 4634
  disable {{"parent.img.existInput || !parent.premultiplied"}}
 }
 Premult {
  name Premult1
  xpos -246
  ypos 4672
  disable {{!parent.premultiplied}}
 }
push $Nc8975000
 Merge2 {
  inputs 2+1
  operation copy
  name Merge5
  xpos -246
  ypos 4818
 }
 Switch {
  inputs 6
  which {{parent.output}}
  name Switch1
  xpos -246
  ypos 5750
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge4
  xpos -246
  ypos 6248
  disable {{"Switch1.which==0?1:0 || !parent.premultiplied"}}
 }
 Dot {
  name Dot44
  xpos -212
  ypos 6452
 }
set Nc89dca00 [stack 0]
push $Nc8971400
 Dot {
  name Dot39
  xpos 790
  ypos -1190
 }
 Dot {
  name Dot15
  xpos 790
  ypos 6452
 }
 DeepRecolor {
  inputs 2
  channels all
  bbox color
  targetInputAlpha true
  name DeepRecolor1
  xpos -88
  ypos 6445
 }
 Dot {
  name Dot43
  xpos -54
  ypos 6559
 }
push $Nc89dca00
 Switch {
  inputs 2
  which {{inputData}}
  name SwitchDeep1
  xpos -246
  ypos 6555
 }
 Output {
  name Output1
  xpos -246
  ypos 7618
 }
 Axis2 {
  inputs 0
  rot_order XYZ
  name Axis_g
  xpos -501
  ypos 1373
  addUserKnob {20 hydra_tab l Hydra}
  addUserKnob {6 sauron_lock l lock t "Prevents Sauron from updating this node when locked." -STARTLINE}
  addUserKnob {1 hyref_path l hyref}
  addUserKnob {1 asset_path l path}
  addUserKnob {1 date l "modified date"}
  addUserKnob {1 user l "user name"}
  addUserKnob {6 deprecated +DISABLED +STARTLINE}
  addUserKnob {26 hydra_divider l "" +STARTLINE}
  addUserKnob {22 hydra_refresh l refresh T "from nuke_weta_base.node.hydra_tab import on_refresh; on_refresh()" +STARTLINE}
  addUserKnob {26 hydra_metadata -STARTLINE +HIDDEN +INVISIBLE T "\{\}"}
 }
 Axis2 {
  inputs 0
  rot_order XYZ
  name Axis_b
  xpos -501
  ypos 1466
  addUserKnob {20 hydra_tab l Hydra}
  addUserKnob {6 sauron_lock l lock t "Prevents Sauron from updating this node when locked." -STARTLINE}
  addUserKnob {1 hyref_path l hyref}
  addUserKnob {1 asset_path l path}
  addUserKnob {1 date l "modified date"}
  addUserKnob {1 user l "user name"}
  addUserKnob {6 deprecated +DISABLED +STARTLINE}
  addUserKnob {26 hydra_divider l "" +STARTLINE}
  addUserKnob {22 hydra_refresh l refresh T "from nuke_weta_base.node.hydra_tab import on_refresh; on_refresh()" +STARTLINE}
  addUserKnob {26 hydra_metadata -STARTLINE +HIDDEN +INVISIBLE T "\{\}"}
 }
 Axis2 {
  inputs 0
  rot_order XYZ
  name Axis_a
  xpos -501
  ypos 1578
  addUserKnob {20 hydra_tab l Hydra}
  addUserKnob {6 sauron_lock l lock t "Prevents Sauron from updating this node when locked." -STARTLINE}
  addUserKnob {1 hyref_path l hyref}
  addUserKnob {1 asset_path l path}
  addUserKnob {1 date l "modified date"}
  addUserKnob {1 user l "user name"}
  addUserKnob {6 deprecated +DISABLED +STARTLINE}
  addUserKnob {26 hydra_divider l "" +STARTLINE}
  addUserKnob {22 hydra_refresh l refresh T "from nuke_weta_base.node.hydra_tab import on_refresh; on_refresh()" +STARTLINE}
  addUserKnob {26 hydra_metadata -STARTLINE +HIDDEN +INVISIBLE T "\{\}"}
 }
 Axis2 {
  inputs 0
  rot_order XYZ
  name Axis_r
  xpos -501
  ypos 1264
  addUserKnob {20 hydra_tab l Hydra}
  addUserKnob {6 sauron_lock l lock t "Prevents Sauron from updating this node when locked." -STARTLINE}
  addUserKnob {1 hyref_path l hyref}
  addUserKnob {1 asset_path l path}
  addUserKnob {1 date l "modified date"}
  addUserKnob {1 user l "user name"}
  addUserKnob {6 deprecated +DISABLED +STARTLINE}
  addUserKnob {26 hydra_divider l "" +STARTLINE}
  addUserKnob {22 hydra_refresh l refresh T "from nuke_weta_base.node.hydra_tab import on_refresh; on_refresh()" +STARTLINE}
  addUserKnob {26 hydra_metadata -STARTLINE +HIDDEN +INVISIBLE T "\{\}"}
 }
push $Nc8973c00
 NoOp {
  name menu
  xpos -150
  ypos -495
  addUserKnob {20 User}
  addUserKnob {4 output M {result "luminance noise" "contrast noise" "saturation noise" "alpha mask noise" precomp "" "" "" ""}}
  addUserKnob {26 ""}
  addUserKnob {3 units}
  units {{parent.units==0?0.01:parent.units==1?1:100}}
  addUserKnob {26 ""}
  addUserKnob {14 noiseScaleR R 0 500}
  noiseScaleR {{50*units*sizeR.w/2} {50*units*sizeR.h/2}}
  addUserKnob {14 noiseScaleG R 0 500}
  noiseScaleG {{350*units*sizeG.w/2} {350*units*sizeG.h/2}}
  addUserKnob {14 noiseScaleB R 0 500}
  noiseScaleB {{300*units*sizeB.w/2} {300*units*sizeB.h/2}}
  addUserKnob {14 noiseScaleA R 0 100}
  noiseScaleA {{600*units*sizeA.w/2} {600*units*sizeA.h/2}}
  addUserKnob {26 ""}
  addUserKnob {14 sizeR l size R 0 10}
  sizeR 2
  addUserKnob {14 sizeG l size R 0 10}
  sizeG 2
  addUserKnob {14 sizeB l size R 0 10}
  sizeB 2
  addUserKnob {14 sizeA l size R 0 10}
  sizeA 2
 }
end_group
